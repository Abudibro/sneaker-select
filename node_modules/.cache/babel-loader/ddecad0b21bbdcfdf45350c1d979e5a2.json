{"ast":null,"code":"import $ from '../../shared/dom7';\nimport { bindMethods } from '../../shared/utils';\nimport { getSupport } from '../../shared/get-support';\nvar Navbar = {\n  size: function size(el) {\n    var app = this;\n    var $el = $(el);\n\n    if ($el.hasClass('navbars')) {\n      $el = $el.children('.navbar').each(function (navbarEl) {\n        app.navbar.size(navbarEl);\n      });\n      return;\n    }\n\n    var $innerEl = $el.children('.navbar-inner');\n    if (!$innerEl.length) return;\n    var needCenterTitle = $innerEl.hasClass('navbar-inner-centered-title') || app.params.navbar[app.theme + \"CenterTitle\"];\n    var needLeftTitle = app.theme === 'ios' && !app.params.navbar[app.theme + \"CenterTitle\"];\n    if (!needCenterTitle && !needLeftTitle) return;\n\n    if ($el.hasClass('stacked') || $el.parents('.stacked').length > 0 || $el.parents('.tab:not(.tab-active)').length > 0 || $el.parents('.popup:not(.modal-in)').length > 0) {\n      return;\n    }\n\n    if (app.theme !== 'ios' && app.params.navbar[app.theme + \"CenterTitle\"]) {\n      $innerEl.addClass('navbar-inner-centered-title');\n    }\n\n    if (app.theme === 'ios' && !app.params.navbar.iosCenterTitle) {\n      $innerEl.addClass('navbar-inner-left-title');\n    }\n\n    var $viewEl = $el.parents('.view').eq(0);\n    var left = app.rtl ? $innerEl.children('.right') : $innerEl.children('.left');\n    var right = app.rtl ? $innerEl.children('.left') : $innerEl.children('.right');\n    var title = $innerEl.children('.title');\n    var subnavbar = $innerEl.children('.subnavbar');\n    var noLeft = left.length === 0;\n    var noRight = right.length === 0;\n    var leftWidth = noLeft ? 0 : left.outerWidth(true);\n    var rightWidth = noRight ? 0 : right.outerWidth(true);\n    var titleWidth = title.outerWidth(true);\n    var navbarStyles = $innerEl.styles();\n    var navbarWidth = $innerEl[0].offsetWidth;\n    var navbarInnerWidth = navbarWidth - parseInt(navbarStyles.paddingLeft, 10) - parseInt(navbarStyles.paddingRight, 10);\n    var isPrevious = $el.hasClass('navbar-previous');\n    var sliding = $innerEl.hasClass('sliding');\n    var router;\n    var dynamicNavbar;\n\n    if ($viewEl.length > 0 && $viewEl[0].f7View) {\n      router = $viewEl[0].f7View.router;\n      dynamicNavbar = router && router.dynamicNavbar;\n    }\n\n    var currLeft;\n    var diff;\n\n    if (noRight) {\n      currLeft = navbarInnerWidth - titleWidth;\n    }\n\n    if (noLeft) {\n      currLeft = 0;\n    }\n\n    if (!noLeft && !noRight) {\n      currLeft = (navbarInnerWidth - rightWidth - titleWidth + leftWidth) / 2;\n    }\n\n    var requiredLeft = (navbarInnerWidth - titleWidth) / 2;\n\n    if (navbarInnerWidth - leftWidth - rightWidth > titleWidth) {\n      if (requiredLeft < leftWidth) {\n        requiredLeft = leftWidth;\n      }\n\n      if (requiredLeft + titleWidth > navbarInnerWidth - rightWidth) {\n        requiredLeft = navbarInnerWidth - rightWidth - titleWidth;\n      }\n\n      diff = requiredLeft - currLeft;\n    } else {\n      diff = 0;\n    } // RTL inverter\n\n\n    var inverter = app.rtl ? -1 : 1;\n\n    if (dynamicNavbar && app.theme === 'ios') {\n      if (title.hasClass('sliding') || title.length > 0 && sliding) {\n        var titleLeftOffset = -(currLeft + diff) * inverter;\n        var titleRightOffset = (navbarInnerWidth - currLeft - diff - titleWidth) * inverter;\n\n        if (isPrevious) {\n          if (router && router.params.iosAnimateNavbarBackIcon) {\n            var activeNavbarBackLink = $el.parent().find('.navbar-current').children('.left.sliding').find('.back .icon ~ span');\n\n            if (activeNavbarBackLink.length > 0) {\n              titleLeftOffset += activeNavbarBackLink[0].offsetLeft;\n            }\n          }\n        }\n\n        title[0].f7NavbarLeftOffset = titleLeftOffset;\n        title[0].f7NavbarRightOffset = titleRightOffset;\n      }\n\n      if (!noLeft && (left.hasClass('sliding') || sliding)) {\n        if (app.rtl) {\n          left[0].f7NavbarLeftOffset = -(navbarInnerWidth - left[0].offsetWidth) / 2 * inverter;\n          left[0].f7NavbarRightOffset = leftWidth * inverter;\n        } else {\n          left[0].f7NavbarLeftOffset = -leftWidth;\n          left[0].f7NavbarRightOffset = (navbarInnerWidth - left[0].offsetWidth) / 2;\n\n          if (router && router.params.iosAnimateNavbarBackIcon && left.find('.back .icon').length > 0) {\n            if (left.find('.back .icon ~ span').length) {\n              var leftOffset = left[0].f7NavbarLeftOffset;\n              var rightOffset = left[0].f7NavbarRightOffset;\n              left[0].f7NavbarLeftOffset = 0;\n              left[0].f7NavbarRightOffset = 0;\n              left.find('.back .icon ~ span')[0].f7NavbarLeftOffset = leftOffset;\n              left.find('.back .icon ~ span')[0].f7NavbarRightOffset = rightOffset - left.find('.back .icon')[0].offsetWidth;\n            }\n          }\n        }\n      }\n\n      if (!noRight && (right.hasClass('sliding') || sliding)) {\n        if (app.rtl) {\n          right[0].f7NavbarLeftOffset = -rightWidth * inverter;\n          right[0].f7NavbarRightOffset = (navbarInnerWidth - right[0].offsetWidth) / 2 * inverter;\n        } else {\n          right[0].f7NavbarLeftOffset = -(navbarInnerWidth - right[0].offsetWidth) / 2;\n          right[0].f7NavbarRightOffset = rightWidth;\n        }\n      }\n\n      if (subnavbar.length && (subnavbar.hasClass('sliding') || sliding)) {\n        subnavbar[0].f7NavbarLeftOffset = app.rtl ? subnavbar[0].offsetWidth : -subnavbar[0].offsetWidth;\n        subnavbar[0].f7NavbarRightOffset = -subnavbar[0].f7NavbarLeftOffset;\n      }\n    } // Center title\n\n\n    if (needCenterTitle) {\n      var titleLeft = diff;\n      if (app.rtl && noLeft && noRight && title.length > 0) titleLeft = -titleLeft;\n      title.css({\n        left: titleLeft + \"px\"\n      });\n    }\n  },\n  hide: function hide(el, animate, hideStatusbar, hideOnlyCurrent) {\n    if (animate === void 0) {\n      animate = true;\n    }\n\n    if (hideStatusbar === void 0) {\n      hideStatusbar = false;\n    }\n\n    if (hideOnlyCurrent === void 0) {\n      hideOnlyCurrent = false;\n    }\n\n    var app = this;\n    var $el = $(el);\n    var isDynamic = $el.hasClass('navbar') && $el.parent('.navbars').length && !hideOnlyCurrent;\n    if (isDynamic) $el = $el.parents('.navbars');\n    if (!$el.length) return;\n    if ($el.hasClass('navbar-hidden')) return;\n    var className = \"navbar-hidden\" + (animate ? ' navbar-transitioning' : '');\n    var currentIsLarge = isDynamic ? $el.find('.navbar-current .title-large').length : $el.find('.title-large').length;\n\n    if (currentIsLarge) {\n      className += ' navbar-large-hidden';\n    }\n\n    if (hideStatusbar) {\n      className += ' navbar-hidden-statusbar';\n    }\n\n    $el.transitionEnd(function () {\n      $el.removeClass('navbar-transitioning');\n    });\n    $el.addClass(className);\n\n    if (isDynamic) {\n      $el.children('.navbar').each(function (subEl) {\n        $(subEl).trigger('navbar:hide');\n        app.emit('navbarHide', subEl);\n      });\n    } else {\n      $el.trigger('navbar:hide');\n      app.emit('navbarHide', $el[0]);\n    }\n  },\n  show: function show(el, animate, hideOnlyCurrent) {\n    if (el === void 0) {\n      el = '.navbar-hidden';\n    }\n\n    if (animate === void 0) {\n      animate = true;\n    }\n\n    if (hideOnlyCurrent === void 0) {\n      hideOnlyCurrent = false;\n    }\n\n    var app = this;\n    var $el = $(el);\n    var isDynamic = $el.hasClass('navbar') && $el.parent('.navbars').length && !hideOnlyCurrent;\n    if (isDynamic) $el = $el.parents('.navbars');\n    if (!$el.length) return;\n    if (!$el.hasClass('navbar-hidden')) return;\n\n    if (animate) {\n      $el.addClass('navbar-transitioning');\n      $el.transitionEnd(function () {\n        $el.removeClass('navbar-transitioning');\n      });\n    }\n\n    $el.removeClass('navbar-hidden navbar-large-hidden navbar-hidden-statusbar');\n\n    if (isDynamic) {\n      $el.children('.navbar').each(function (subEl) {\n        $(subEl).trigger('navbar:show');\n        app.emit('navbarShow', subEl);\n      });\n    } else {\n      $el.trigger('navbar:show');\n      app.emit('navbarShow', $el[0]);\n    }\n  },\n  getElByPage: function getElByPage(page) {\n    var $pageEl;\n    var $navbarEl;\n    var pageData;\n\n    if (page.$navbarEl || page.$el) {\n      pageData = page;\n      $pageEl = page.$el;\n    } else {\n      $pageEl = $(page);\n      if ($pageEl.length > 0) pageData = $pageEl[0].f7Page;\n    }\n\n    if (pageData && pageData.$navbarEl && pageData.$navbarEl.length > 0) {\n      $navbarEl = pageData.$navbarEl;\n    } else if ($pageEl) {\n      $navbarEl = $pageEl.children('.navbar');\n    }\n\n    if (!$navbarEl || $navbarEl && $navbarEl.length === 0) return undefined;\n    return $navbarEl[0];\n  },\n  getPageByEl: function getPageByEl(navbarEl) {\n    var $navbarEl = $(navbarEl);\n\n    if ($navbarEl.parents('.page').length) {\n      return $navbarEl.parents('.page')[0];\n    }\n\n    var pageEl;\n    $navbarEl.parents('.view').find('.page').each(function (el) {\n      if (el && el.f7Page && el.f7Page.navbarEl && $navbarEl[0] === el.f7Page.navbarEl) {\n        pageEl = el;\n      }\n    });\n    return pageEl;\n  },\n  collapseLargeTitle: function collapseLargeTitle(navbarEl) {\n    var app = this;\n    var $navbarEl = $(navbarEl);\n\n    if ($navbarEl.hasClass('navbars')) {\n      $navbarEl = $navbarEl.find('.navbar');\n\n      if ($navbarEl.length > 1) {\n        $navbarEl = $(navbarEl).find('.navbar-large.navbar-current');\n      }\n\n      if ($navbarEl.length > 1 || !$navbarEl.length) {\n        return;\n      }\n    }\n\n    var $pageEl = $(app.navbar.getPageByEl($navbarEl));\n    $navbarEl.addClass('navbar-large-collapsed');\n    $pageEl.eq(0).addClass('page-with-navbar-large-collapsed').trigger('page:navbarlargecollapsed');\n    app.emit('pageNavbarLargeCollapsed', $pageEl[0]);\n    $navbarEl.trigger('navbar:collapse');\n    app.emit('navbarCollapse', $navbarEl[0]);\n  },\n  expandLargeTitle: function expandLargeTitle(navbarEl) {\n    var app = this;\n    var $navbarEl = $(navbarEl);\n\n    if ($navbarEl.hasClass('navbars')) {\n      $navbarEl = $navbarEl.find('.navbar-large');\n\n      if ($navbarEl.length > 1) {\n        $navbarEl = $(navbarEl).find('.navbar-large.navbar-current');\n      }\n\n      if ($navbarEl.length > 1 || !$navbarEl.length) {\n        return;\n      }\n    }\n\n    var $pageEl = $(app.navbar.getPageByEl($navbarEl));\n    $navbarEl.removeClass('navbar-large-collapsed');\n    $pageEl.eq(0).removeClass('page-with-navbar-large-collapsed').trigger('page:navbarlargeexpanded');\n    app.emit('pageNavbarLargeExpanded', $pageEl[0]);\n    $navbarEl.trigger('navbar:expand');\n    app.emit('navbarExpand', $navbarEl[0]);\n  },\n  toggleLargeTitle: function toggleLargeTitle(navbarEl) {\n    var app = this;\n    var $navbarEl = $(navbarEl);\n\n    if ($navbarEl.hasClass('navbars')) {\n      $navbarEl = $navbarEl.find('.navbar-large');\n\n      if ($navbarEl.length > 1) {\n        $navbarEl = $(navbarEl).find('.navbar-large.navbar-current');\n      }\n\n      if ($navbarEl.length > 1 || !$navbarEl.length) {\n        return;\n      }\n    }\n\n    if ($navbarEl.hasClass('navbar-large-collapsed')) {\n      app.navbar.expandLargeTitle($navbarEl);\n    } else {\n      app.navbar.collapseLargeTitle($navbarEl);\n    }\n  },\n  initNavbarOnScroll: function initNavbarOnScroll(pageEl, navbarEl, needHide, needCollapse, needTransparent) {\n    var app = this;\n    var support = getSupport();\n    var $pageEl = $(pageEl);\n    var $navbarEl = $(navbarEl);\n    var $titleLargeEl = $navbarEl.find('.title-large');\n    var isLarge = $titleLargeEl.length || $navbarEl.hasClass('.navbar-large');\n    var navbarHideHeight = 44;\n    var snapPageScrollToLargeTitle = app.params.navbar.snapPageScrollToLargeTitle;\n    var snapPageScrollToTransparentNavbar = app.params.navbar.snapPageScrollToTransparentNavbar;\n    var previousScrollTop;\n    var currentScrollTop;\n    var scrollHeight;\n    var offsetHeight;\n    var reachEnd;\n    var action;\n    var navbarHidden;\n    var navbarCollapsed;\n    var navbarTitleLargeHeight;\n    var navbarOffsetHeight;\n\n    if (needCollapse || needHide && isLarge) {\n      navbarTitleLargeHeight = $navbarEl.css('--f7-navbar-large-title-height');\n\n      if (navbarTitleLargeHeight && navbarTitleLargeHeight.indexOf('px') >= 0) {\n        navbarTitleLargeHeight = parseInt(navbarTitleLargeHeight, 10);\n\n        if (Number.isNaN(navbarTitleLargeHeight) && $titleLargeEl.length) {\n          navbarTitleLargeHeight = $titleLargeEl[0].offsetHeight;\n        } else if (Number.isNaN(navbarTitleLargeHeight)) {\n          if (app.theme === 'ios') navbarTitleLargeHeight = 52;else if (app.theme === 'md') navbarTitleLargeHeight = 48;else if (app.theme === 'aurora') navbarTitleLargeHeight = 38;\n        }\n      } else if ($titleLargeEl.length) {\n        navbarTitleLargeHeight = $titleLargeEl[0].offsetHeight;\n      } else {\n        // eslint-disable-next-line\n        if (app.theme === 'ios') navbarTitleLargeHeight = 52;else if (app.theme === 'md') navbarTitleLargeHeight = 48;else if (app.theme === 'aurora') navbarTitleLargeHeight = 38;\n      }\n    }\n\n    if (needHide && isLarge) {\n      navbarHideHeight += navbarTitleLargeHeight;\n    }\n\n    var scrollChanged;\n    var scrollContent;\n    var scrollTimeoutId;\n    var touchEndTimeoutId;\n    var touchSnapTimeout = 70;\n    var desktopSnapTimeout = 300;\n\n    function calcScrollableDistance() {\n      $pageEl.find('.page-content').each(function (pageContentEl) {\n        pageContentEl.f7ScrollableDistance = pageContentEl.scrollHeight - pageContentEl.offsetHeight;\n      });\n    }\n\n    function snapLargeNavbar() {\n      var inSearchbarExpanded = $navbarEl.hasClass('with-searchbar-expandable-enabled');\n      if (inSearchbarExpanded) return;\n      if (!scrollContent || currentScrollTop < 0) return;\n\n      if (currentScrollTop >= navbarTitleLargeHeight / 2 && currentScrollTop < navbarTitleLargeHeight) {\n        $(scrollContent).scrollTop(navbarTitleLargeHeight, 100);\n      } else if (currentScrollTop < navbarTitleLargeHeight) {\n        $(scrollContent).scrollTop(0, 200);\n      }\n    }\n\n    function snapTransparentNavbar() {\n      var inSearchbarExpanded = $navbarEl.hasClass('with-searchbar-expandable-enabled');\n      if (inSearchbarExpanded) return;\n      if (!scrollContent || currentScrollTop < 0) return;\n\n      if (currentScrollTop >= navbarOffsetHeight / 2 && currentScrollTop < navbarOffsetHeight) {\n        $(scrollContent).scrollTop(navbarOffsetHeight, 100);\n      } else if (currentScrollTop < navbarOffsetHeight) {\n        $(scrollContent).scrollTop(0, 200);\n      }\n    }\n\n    function handleNavbarTransparent() {\n      var isHidden = $navbarEl.hasClass('navbar-hidden') || $navbarEl.parent('.navbars').hasClass('navbar-hidden');\n      var inSearchbarExpanded = $navbarEl.hasClass('with-searchbar-expandable-enabled');\n      if (inSearchbarExpanded || isHidden) return;\n\n      if (!navbarOffsetHeight) {\n        navbarOffsetHeight = navbarEl.offsetHeight;\n      }\n\n      var opacity = currentScrollTop / navbarOffsetHeight;\n      var notTransparent = $navbarEl.hasClass('navbar-transparent-visible');\n      opacity = Math.max(Math.min(opacity, 1), 0);\n\n      if (notTransparent && opacity === 1 || !notTransparent && opacity === 0) {\n        $navbarEl.find('.navbar-bg, .title').css('opacity', '');\n        return;\n      }\n\n      if (notTransparent && opacity === 0) {\n        $navbarEl.trigger('navbar:transparenthide');\n        app.emit('navbarTransparentHide', $navbarEl[0]);\n        $navbarEl.removeClass('navbar-transparent-visible');\n        $navbarEl.find('.navbar-bg, .title').css('opacity', '');\n        return;\n      }\n\n      if (!notTransparent && opacity === 1) {\n        $navbarEl.trigger('navbar:transparentshow');\n        app.emit('navbarTransparentShow', $navbarEl[0]);\n        $navbarEl.addClass('navbar-transparent-visible');\n        $navbarEl.find('.navbar-bg, .title').css('opacity', '');\n        return;\n      }\n\n      $navbarEl.find('.navbar-bg, .title').css('opacity', opacity);\n\n      if (snapPageScrollToTransparentNavbar) {\n        if (!support.touch) {\n          clearTimeout(scrollTimeoutId);\n          scrollTimeoutId = setTimeout(function () {\n            snapTransparentNavbar();\n          }, desktopSnapTimeout);\n        } else if (touchEndTimeoutId) {\n          clearTimeout(touchEndTimeoutId);\n          touchEndTimeoutId = null;\n          touchEndTimeoutId = setTimeout(function () {\n            snapTransparentNavbar();\n            clearTimeout(touchEndTimeoutId);\n            touchEndTimeoutId = null;\n          }, touchSnapTimeout);\n        }\n      }\n    }\n\n    var previousCollapseProgress = null;\n    var collapseProgress = null;\n\n    function handleLargeNavbarCollapse(pageContentEl) {\n      var isHidden = $navbarEl.hasClass('navbar-hidden') || $navbarEl.parent('.navbars').hasClass('navbar-hidden');\n      if (isHidden) return;\n      var isLargeTransparent = $navbarEl.hasClass('navbar-large-transparent') || $navbarEl.hasClass('navbar-large') && $navbarEl.hasClass('navbar-transparent');\n      previousCollapseProgress = collapseProgress;\n      var scrollableDistance = Math.min(navbarTitleLargeHeight, pageContentEl.f7ScrollableDistance || navbarTitleLargeHeight);\n      collapseProgress = Math.min(Math.max(currentScrollTop / scrollableDistance, 0), 1);\n      var previousCollapseWasInMiddle = previousCollapseProgress > 0 && previousCollapseProgress < 1;\n      var inSearchbarExpanded = $navbarEl.hasClass('with-searchbar-expandable-enabled');\n      if (inSearchbarExpanded) return;\n      navbarCollapsed = $navbarEl.hasClass('navbar-large-collapsed');\n\n      if (collapseProgress === 0 && navbarCollapsed) {\n        app.navbar.expandLargeTitle($navbarEl[0]);\n      } else if (collapseProgress === 1 && !navbarCollapsed) {\n        app.navbar.collapseLargeTitle($navbarEl[0]);\n      }\n\n      if (collapseProgress === 0 && navbarCollapsed || collapseProgress === 0 && previousCollapseWasInMiddle || collapseProgress === 1 && !navbarCollapsed || collapseProgress === 1 && previousCollapseWasInMiddle) {\n        if (app.theme === 'md') {\n          $navbarEl.find('.navbar-inner').css('overflow', '');\n        }\n\n        $navbarEl.find('.title').css('opacity', '');\n        $navbarEl.find('.title-large-text, .subnavbar').css('transform', '');\n\n        if (isLargeTransparent) {\n          $navbarEl.find('.navbar-bg').css('opacity', '');\n        } else {\n          $navbarEl.find('.navbar-bg').css('transform', '');\n        }\n      } else if (collapseProgress > 0 && collapseProgress < 1) {\n        if (app.theme === 'md') {\n          $navbarEl.find('.navbar-inner').css('overflow', 'visible');\n        }\n\n        $navbarEl.find('.title').css('opacity', collapseProgress);\n        $navbarEl.find('.title-large-text, .subnavbar').css('transform', \"translate3d(0px, \" + -1 * collapseProgress * navbarTitleLargeHeight + \"px, 0)\");\n\n        if (isLargeTransparent) {\n          $navbarEl.find('.navbar-bg').css('opacity', collapseProgress);\n        } else {\n          $navbarEl.find('.navbar-bg').css('transform', \"translate3d(0px, \" + -1 * collapseProgress * navbarTitleLargeHeight + \"px, 0)\");\n        }\n      }\n\n      if (snapPageScrollToLargeTitle) {\n        if (!support.touch) {\n          clearTimeout(scrollTimeoutId);\n          scrollTimeoutId = setTimeout(function () {\n            snapLargeNavbar();\n          }, desktopSnapTimeout);\n        } else if (touchEndTimeoutId) {\n          clearTimeout(touchEndTimeoutId);\n          touchEndTimeoutId = null;\n          touchEndTimeoutId = setTimeout(function () {\n            snapLargeNavbar();\n            clearTimeout(touchEndTimeoutId);\n            touchEndTimeoutId = null;\n          }, touchSnapTimeout);\n        }\n      }\n    }\n\n    function handleTitleHideShow() {\n      if ($pageEl.hasClass('page-with-card-opened')) return;\n      scrollHeight = scrollContent.scrollHeight;\n      offsetHeight = scrollContent.offsetHeight;\n      reachEnd = currentScrollTop + offsetHeight >= scrollHeight;\n      navbarHidden = $navbarEl.hasClass('navbar-hidden') || $navbarEl.parent('.navbars').hasClass('navbar-hidden');\n\n      if (reachEnd) {\n        if (app.params.navbar.showOnPageScrollEnd) {\n          action = 'show';\n        }\n      } else if (previousScrollTop > currentScrollTop) {\n        if (app.params.navbar.showOnPageScrollTop || currentScrollTop <= navbarHideHeight) {\n          action = 'show';\n        } else {\n          action = 'hide';\n        }\n      } else if (currentScrollTop > navbarHideHeight) {\n        action = 'hide';\n      } else {\n        action = 'show';\n      }\n\n      if (action === 'show' && navbarHidden) {\n        app.navbar.show($navbarEl, true, true);\n        navbarHidden = false;\n      } else if (action === 'hide' && !navbarHidden) {\n        app.navbar.hide($navbarEl, true, false, true);\n        navbarHidden = true;\n      }\n\n      previousScrollTop = currentScrollTop;\n    }\n\n    function handleScroll(e) {\n      scrollContent = this;\n\n      if (e && e.target && e.target !== scrollContent) {\n        return;\n      }\n\n      currentScrollTop = scrollContent.scrollTop;\n      scrollChanged = currentScrollTop;\n\n      if (needCollapse) {\n        handleLargeNavbarCollapse(scrollContent);\n      } else if (needTransparent) {\n        handleNavbarTransparent();\n      }\n\n      if ($pageEl.hasClass('page-previous')) return;\n\n      if (needHide) {\n        handleTitleHideShow();\n      }\n    }\n\n    function handeTouchStart() {\n      scrollChanged = false;\n    }\n\n    function handleTouchEnd() {\n      clearTimeout(touchEndTimeoutId);\n      touchEndTimeoutId = null;\n      touchEndTimeoutId = setTimeout(function () {\n        if (scrollChanged !== false) {\n          if (needTransparent && !needCollapse) {\n            snapTransparentNavbar();\n          } else {\n            snapLargeNavbar();\n          }\n\n          clearTimeout(touchEndTimeoutId);\n          touchEndTimeoutId = null;\n        }\n      }, touchSnapTimeout);\n    }\n\n    $pageEl.on('scroll', '.page-content', handleScroll, true);\n\n    if (support.touch && (needCollapse && snapPageScrollToLargeTitle || needTransparent && snapPageScrollToTransparentNavbar)) {\n      app.on('touchstart:passive', handeTouchStart);\n      app.on('touchend:passive', handleTouchEnd);\n    }\n\n    calcScrollableDistance();\n\n    if (needCollapse || needTransparent) {\n      $pageEl.find('.page-content').each(function (pageContentEl) {\n        if (pageContentEl.scrollTop > 0) handleScroll.call(pageContentEl);\n      });\n    }\n\n    app.on('resize', calcScrollableDistance);\n\n    $pageEl[0].f7DetachNavbarScrollHandlers = function f7DetachNavbarScrollHandlers() {\n      app.off('resize', calcScrollableDistance);\n      delete $pageEl[0].f7DetachNavbarScrollHandlers;\n      $pageEl.off('scroll', '.page-content', handleScroll, true);\n\n      if (support.touch && (needCollapse && snapPageScrollToLargeTitle || needTransparent && snapPageScrollToTransparentNavbar)) {\n        app.off('touchstart:passive', handeTouchStart);\n        app.off('touchend:passive', handleTouchEnd);\n      }\n    };\n  }\n};\nexport default {\n  name: 'navbar',\n  create: function create() {\n    var app = this;\n    bindMethods(app, {\n      navbar: Navbar\n    });\n  },\n  params: {\n    navbar: {\n      scrollTopOnTitleClick: true,\n      iosCenterTitle: true,\n      mdCenterTitle: false,\n      auroraCenterTitle: true,\n      hideOnPageScroll: false,\n      showOnPageScrollEnd: true,\n      showOnPageScrollTop: true,\n      collapseLargeTitleOnScroll: true,\n      snapPageScrollToLargeTitle: true,\n      snapPageScrollToTransparentNavbar: true\n    }\n  },\n  on: {\n    'panelBreakpoint panelCollapsedBreakpoint panelResize viewResize resize viewMasterDetailBreakpoint': function onPanelResize() {\n      var app = this;\n      $('.navbar').each(function (navbarEl) {\n        app.navbar.size(navbarEl);\n      });\n    },\n    pageBeforeRemove: function pageBeforeRemove(page) {\n      if (page.$el[0].f7DetachNavbarScrollHandlers) {\n        page.$el[0].f7DetachNavbarScrollHandlers();\n      }\n    },\n    pageBeforeIn: function pageBeforeIn(page) {\n      var app = this;\n      if (app.theme !== 'ios') return;\n      var $navbarsEl;\n      var view = page.$el.parents('.view')[0].f7View;\n      var navbarEl = app.navbar.getElByPage(page);\n\n      if (!navbarEl) {\n        $navbarsEl = page.$el.parents('.view').children('.navbars');\n      } else {\n        $navbarsEl = $(navbarEl).parents('.navbars');\n      }\n\n      if (page.$el.hasClass('no-navbar') || view.router.dynamicNavbar && !navbarEl) {\n        var animate = !!(page.pageFrom && page.router.history.length > 0);\n        app.navbar.hide($navbarsEl, animate);\n      } else {\n        app.navbar.show($navbarsEl);\n      }\n    },\n    pageReinit: function pageReinit(page) {\n      var app = this;\n      var $navbarEl = $(app.navbar.getElByPage(page));\n      if (!$navbarEl || $navbarEl.length === 0) return;\n      app.navbar.size($navbarEl);\n    },\n    pageInit: function pageInit(page) {\n      var app = this;\n      var $navbarEl = $(app.navbar.getElByPage(page));\n      if (!$navbarEl || $navbarEl.length === 0) return; // Size\n\n      app.navbar.size($navbarEl); // Need Collapse On Scroll\n\n      var needCollapseOnScrollHandler;\n\n      if ($navbarEl.find('.title-large').length > 0) {\n        $navbarEl.addClass('navbar-large');\n      }\n\n      if ($navbarEl.hasClass('navbar-large')) {\n        if (app.params.navbar.collapseLargeTitleOnScroll) needCollapseOnScrollHandler = true;\n        page.$el.addClass('page-with-navbar-large');\n      } // Need transparent on scroll\n\n\n      var needTransparentOnScroll;\n\n      if (!needCollapseOnScrollHandler && $navbarEl.hasClass('navbar-transparent')) {\n        needTransparentOnScroll = true;\n      } // Need Hide On Scroll\n\n\n      var needHideOnScrollHandler;\n\n      if (app.params.navbar.hideOnPageScroll || page.$el.find('.hide-navbar-on-scroll').length || page.$el.hasClass('hide-navbar-on-scroll') || page.$el.find('.hide-bars-on-scroll').length || page.$el.hasClass('hide-bars-on-scroll')) {\n        if (page.$el.find('.keep-navbar-on-scroll').length || page.$el.hasClass('keep-navbar-on-scroll') || page.$el.find('.keep-bars-on-scroll').length || page.$el.hasClass('keep-bars-on-scroll')) {\n          needHideOnScrollHandler = false;\n        } else {\n          needHideOnScrollHandler = true;\n        }\n      }\n\n      if (needCollapseOnScrollHandler || needHideOnScrollHandler || needTransparentOnScroll) {\n        app.navbar.initNavbarOnScroll(page.el, $navbarEl[0], needHideOnScrollHandler, needCollapseOnScrollHandler, needTransparentOnScroll);\n      }\n    },\n    'panelOpen panelSwipeOpen modalOpen': function onPanelModalOpen(instance) {\n      var app = this;\n      instance.$el.find('.navbar:not(.navbar-previous):not(.stacked)').each(function (navbarEl) {\n        app.navbar.size(navbarEl);\n      });\n    },\n    tabShow: function tabShow(tabEl) {\n      var app = this;\n      $(tabEl).find('.navbar:not(.navbar-previous):not(.stacked)').each(function (navbarEl) {\n        app.navbar.size(navbarEl);\n      });\n    }\n  },\n  clicks: {\n    '.navbar .title': function onTitleClick($clickedEl, clickedData, e) {\n      var app = this;\n      if (!app.params.navbar.scrollTopOnTitleClick) return;\n\n      if ($(e.target).closest('a, button').length > 0) {\n        return;\n      }\n\n      var $pageContentEl; // Find active page\n\n      var $navbarEl = $clickedEl.parents('.navbar');\n      var $navbarsEl = $navbarEl.parents('.navbars'); // Static Layout\n\n      $pageContentEl = $navbarEl.parents('.page-content');\n\n      if ($pageContentEl.length === 0) {\n        // Fixed Layout\n        if ($navbarEl.parents('.page').length > 0) {\n          $pageContentEl = $navbarEl.parents('.page').find('.page-content');\n        } // Through Layout iOS\n\n\n        if ($pageContentEl.length === 0 && $navbarsEl.length) {\n          if ($navbarsEl.nextAll('.page-current:not(.stacked)').length > 0) {\n            $pageContentEl = $navbarsEl.nextAll('.page-current:not(.stacked)').find('.page-content');\n          }\n        } // Through Layout\n\n\n        if ($pageContentEl.length === 0) {\n          if ($navbarEl.nextAll('.page-current:not(.stacked)').length > 0) {\n            $pageContentEl = $navbarEl.nextAll('.page-current:not(.stacked)').find('.page-content');\n          }\n        }\n      }\n\n      if ($pageContentEl && $pageContentEl.length > 0) {\n        // Check for tab\n        if ($pageContentEl.hasClass('tab')) {\n          $pageContentEl = $pageContentEl.parent('.tabs').children('.page-content.tab-active');\n        }\n\n        if ($pageContentEl.length > 0) $pageContentEl.scrollTop(0, 300);\n      }\n    }\n  },\n  vnode: {\n    navbar: {\n      postpatch: function postpatch(vnode) {\n        var app = this;\n        app.navbar.size(vnode.elm);\n      }\n    }\n  }\n};","map":{"version":3,"sources":["/Users/abdurahmanhijazi/Desktop/Projects/NikeShop/nikeshopfrontend/node_modules/framework7/esm/components/navbar/navbar.js"],"names":["$","bindMethods","getSupport","Navbar","size","el","app","$el","hasClass","children","each","navbarEl","navbar","$innerEl","length","needCenterTitle","params","theme","needLeftTitle","parents","addClass","iosCenterTitle","$viewEl","eq","left","rtl","right","title","subnavbar","noLeft","noRight","leftWidth","outerWidth","rightWidth","titleWidth","navbarStyles","styles","navbarWidth","offsetWidth","navbarInnerWidth","parseInt","paddingLeft","paddingRight","isPrevious","sliding","router","dynamicNavbar","f7View","currLeft","diff","requiredLeft","inverter","titleLeftOffset","titleRightOffset","iosAnimateNavbarBackIcon","activeNavbarBackLink","parent","find","offsetLeft","f7NavbarLeftOffset","f7NavbarRightOffset","leftOffset","rightOffset","titleLeft","css","hide","animate","hideStatusbar","hideOnlyCurrent","isDynamic","className","currentIsLarge","transitionEnd","removeClass","subEl","trigger","emit","show","getElByPage","page","$pageEl","$navbarEl","pageData","f7Page","undefined","getPageByEl","pageEl","collapseLargeTitle","expandLargeTitle","toggleLargeTitle","initNavbarOnScroll","needHide","needCollapse","needTransparent","support","$titleLargeEl","isLarge","navbarHideHeight","snapPageScrollToLargeTitle","snapPageScrollToTransparentNavbar","previousScrollTop","currentScrollTop","scrollHeight","offsetHeight","reachEnd","action","navbarHidden","navbarCollapsed","navbarTitleLargeHeight","navbarOffsetHeight","indexOf","Number","isNaN","scrollChanged","scrollContent","scrollTimeoutId","touchEndTimeoutId","touchSnapTimeout","desktopSnapTimeout","calcScrollableDistance","pageContentEl","f7ScrollableDistance","snapLargeNavbar","inSearchbarExpanded","scrollTop","snapTransparentNavbar","handleNavbarTransparent","isHidden","opacity","notTransparent","Math","max","min","touch","clearTimeout","setTimeout","previousCollapseProgress","collapseProgress","handleLargeNavbarCollapse","isLargeTransparent","scrollableDistance","previousCollapseWasInMiddle","handleTitleHideShow","showOnPageScrollEnd","showOnPageScrollTop","handleScroll","e","target","handeTouchStart","handleTouchEnd","on","call","f7DetachNavbarScrollHandlers","off","name","create","scrollTopOnTitleClick","mdCenterTitle","auroraCenterTitle","hideOnPageScroll","collapseLargeTitleOnScroll","onPanelResize","pageBeforeRemove","pageBeforeIn","$navbarsEl","view","pageFrom","history","pageReinit","pageInit","needCollapseOnScrollHandler","needTransparentOnScroll","needHideOnScrollHandler","onPanelModalOpen","instance","tabShow","tabEl","clicks","onTitleClick","$clickedEl","clickedData","closest","$pageContentEl","nextAll","vnode","postpatch","elm"],"mappings":"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","sourcesContent":["import $ from '../../shared/dom7';\nimport { bindMethods } from '../../shared/utils';\nimport { getSupport } from '../../shared/get-support';\nvar Navbar = {\n  size: function size(el) {\n    var app = this;\n    var $el = $(el);\n\n    if ($el.hasClass('navbars')) {\n      $el = $el.children('.navbar').each(function (navbarEl) {\n        app.navbar.size(navbarEl);\n      });\n      return;\n    }\n\n    var $innerEl = $el.children('.navbar-inner');\n    if (!$innerEl.length) return;\n    var needCenterTitle = $innerEl.hasClass('navbar-inner-centered-title') || app.params.navbar[app.theme + \"CenterTitle\"];\n    var needLeftTitle = app.theme === 'ios' && !app.params.navbar[app.theme + \"CenterTitle\"];\n    if (!needCenterTitle && !needLeftTitle) return;\n\n    if ($el.hasClass('stacked') || $el.parents('.stacked').length > 0 || $el.parents('.tab:not(.tab-active)').length > 0 || $el.parents('.popup:not(.modal-in)').length > 0) {\n      return;\n    }\n\n    if (app.theme !== 'ios' && app.params.navbar[app.theme + \"CenterTitle\"]) {\n      $innerEl.addClass('navbar-inner-centered-title');\n    }\n\n    if (app.theme === 'ios' && !app.params.navbar.iosCenterTitle) {\n      $innerEl.addClass('navbar-inner-left-title');\n    }\n\n    var $viewEl = $el.parents('.view').eq(0);\n    var left = app.rtl ? $innerEl.children('.right') : $innerEl.children('.left');\n    var right = app.rtl ? $innerEl.children('.left') : $innerEl.children('.right');\n    var title = $innerEl.children('.title');\n    var subnavbar = $innerEl.children('.subnavbar');\n    var noLeft = left.length === 0;\n    var noRight = right.length === 0;\n    var leftWidth = noLeft ? 0 : left.outerWidth(true);\n    var rightWidth = noRight ? 0 : right.outerWidth(true);\n    var titleWidth = title.outerWidth(true);\n    var navbarStyles = $innerEl.styles();\n    var navbarWidth = $innerEl[0].offsetWidth;\n    var navbarInnerWidth = navbarWidth - parseInt(navbarStyles.paddingLeft, 10) - parseInt(navbarStyles.paddingRight, 10);\n    var isPrevious = $el.hasClass('navbar-previous');\n    var sliding = $innerEl.hasClass('sliding');\n    var router;\n    var dynamicNavbar;\n\n    if ($viewEl.length > 0 && $viewEl[0].f7View) {\n      router = $viewEl[0].f7View.router;\n      dynamicNavbar = router && router.dynamicNavbar;\n    }\n\n    var currLeft;\n    var diff;\n\n    if (noRight) {\n      currLeft = navbarInnerWidth - titleWidth;\n    }\n\n    if (noLeft) {\n      currLeft = 0;\n    }\n\n    if (!noLeft && !noRight) {\n      currLeft = (navbarInnerWidth - rightWidth - titleWidth + leftWidth) / 2;\n    }\n\n    var requiredLeft = (navbarInnerWidth - titleWidth) / 2;\n\n    if (navbarInnerWidth - leftWidth - rightWidth > titleWidth) {\n      if (requiredLeft < leftWidth) {\n        requiredLeft = leftWidth;\n      }\n\n      if (requiredLeft + titleWidth > navbarInnerWidth - rightWidth) {\n        requiredLeft = navbarInnerWidth - rightWidth - titleWidth;\n      }\n\n      diff = requiredLeft - currLeft;\n    } else {\n      diff = 0;\n    } // RTL inverter\n\n\n    var inverter = app.rtl ? -1 : 1;\n\n    if (dynamicNavbar && app.theme === 'ios') {\n      if (title.hasClass('sliding') || title.length > 0 && sliding) {\n        var titleLeftOffset = -(currLeft + diff) * inverter;\n        var titleRightOffset = (navbarInnerWidth - currLeft - diff - titleWidth) * inverter;\n\n        if (isPrevious) {\n          if (router && router.params.iosAnimateNavbarBackIcon) {\n            var activeNavbarBackLink = $el.parent().find('.navbar-current').children('.left.sliding').find('.back .icon ~ span');\n\n            if (activeNavbarBackLink.length > 0) {\n              titleLeftOffset += activeNavbarBackLink[0].offsetLeft;\n            }\n          }\n        }\n\n        title[0].f7NavbarLeftOffset = titleLeftOffset;\n        title[0].f7NavbarRightOffset = titleRightOffset;\n      }\n\n      if (!noLeft && (left.hasClass('sliding') || sliding)) {\n        if (app.rtl) {\n          left[0].f7NavbarLeftOffset = -(navbarInnerWidth - left[0].offsetWidth) / 2 * inverter;\n          left[0].f7NavbarRightOffset = leftWidth * inverter;\n        } else {\n          left[0].f7NavbarLeftOffset = -leftWidth;\n          left[0].f7NavbarRightOffset = (navbarInnerWidth - left[0].offsetWidth) / 2;\n\n          if (router && router.params.iosAnimateNavbarBackIcon && left.find('.back .icon').length > 0) {\n            if (left.find('.back .icon ~ span').length) {\n              var leftOffset = left[0].f7NavbarLeftOffset;\n              var rightOffset = left[0].f7NavbarRightOffset;\n              left[0].f7NavbarLeftOffset = 0;\n              left[0].f7NavbarRightOffset = 0;\n              left.find('.back .icon ~ span')[0].f7NavbarLeftOffset = leftOffset;\n              left.find('.back .icon ~ span')[0].f7NavbarRightOffset = rightOffset - left.find('.back .icon')[0].offsetWidth;\n            }\n          }\n        }\n      }\n\n      if (!noRight && (right.hasClass('sliding') || sliding)) {\n        if (app.rtl) {\n          right[0].f7NavbarLeftOffset = -rightWidth * inverter;\n          right[0].f7NavbarRightOffset = (navbarInnerWidth - right[0].offsetWidth) / 2 * inverter;\n        } else {\n          right[0].f7NavbarLeftOffset = -(navbarInnerWidth - right[0].offsetWidth) / 2;\n          right[0].f7NavbarRightOffset = rightWidth;\n        }\n      }\n\n      if (subnavbar.length && (subnavbar.hasClass('sliding') || sliding)) {\n        subnavbar[0].f7NavbarLeftOffset = app.rtl ? subnavbar[0].offsetWidth : -subnavbar[0].offsetWidth;\n        subnavbar[0].f7NavbarRightOffset = -subnavbar[0].f7NavbarLeftOffset;\n      }\n    } // Center title\n\n\n    if (needCenterTitle) {\n      var titleLeft = diff;\n      if (app.rtl && noLeft && noRight && title.length > 0) titleLeft = -titleLeft;\n      title.css({\n        left: titleLeft + \"px\"\n      });\n    }\n  },\n  hide: function hide(el, animate, hideStatusbar, hideOnlyCurrent) {\n    if (animate === void 0) {\n      animate = true;\n    }\n\n    if (hideStatusbar === void 0) {\n      hideStatusbar = false;\n    }\n\n    if (hideOnlyCurrent === void 0) {\n      hideOnlyCurrent = false;\n    }\n\n    var app = this;\n    var $el = $(el);\n    var isDynamic = $el.hasClass('navbar') && $el.parent('.navbars').length && !hideOnlyCurrent;\n    if (isDynamic) $el = $el.parents('.navbars');\n    if (!$el.length) return;\n    if ($el.hasClass('navbar-hidden')) return;\n    var className = \"navbar-hidden\" + (animate ? ' navbar-transitioning' : '');\n    var currentIsLarge = isDynamic ? $el.find('.navbar-current .title-large').length : $el.find('.title-large').length;\n\n    if (currentIsLarge) {\n      className += ' navbar-large-hidden';\n    }\n\n    if (hideStatusbar) {\n      className += ' navbar-hidden-statusbar';\n    }\n\n    $el.transitionEnd(function () {\n      $el.removeClass('navbar-transitioning');\n    });\n    $el.addClass(className);\n\n    if (isDynamic) {\n      $el.children('.navbar').each(function (subEl) {\n        $(subEl).trigger('navbar:hide');\n        app.emit('navbarHide', subEl);\n      });\n    } else {\n      $el.trigger('navbar:hide');\n      app.emit('navbarHide', $el[0]);\n    }\n  },\n  show: function show(el, animate, hideOnlyCurrent) {\n    if (el === void 0) {\n      el = '.navbar-hidden';\n    }\n\n    if (animate === void 0) {\n      animate = true;\n    }\n\n    if (hideOnlyCurrent === void 0) {\n      hideOnlyCurrent = false;\n    }\n\n    var app = this;\n    var $el = $(el);\n    var isDynamic = $el.hasClass('navbar') && $el.parent('.navbars').length && !hideOnlyCurrent;\n    if (isDynamic) $el = $el.parents('.navbars');\n    if (!$el.length) return;\n    if (!$el.hasClass('navbar-hidden')) return;\n\n    if (animate) {\n      $el.addClass('navbar-transitioning');\n      $el.transitionEnd(function () {\n        $el.removeClass('navbar-transitioning');\n      });\n    }\n\n    $el.removeClass('navbar-hidden navbar-large-hidden navbar-hidden-statusbar');\n\n    if (isDynamic) {\n      $el.children('.navbar').each(function (subEl) {\n        $(subEl).trigger('navbar:show');\n        app.emit('navbarShow', subEl);\n      });\n    } else {\n      $el.trigger('navbar:show');\n      app.emit('navbarShow', $el[0]);\n    }\n  },\n  getElByPage: function getElByPage(page) {\n    var $pageEl;\n    var $navbarEl;\n    var pageData;\n\n    if (page.$navbarEl || page.$el) {\n      pageData = page;\n      $pageEl = page.$el;\n    } else {\n      $pageEl = $(page);\n      if ($pageEl.length > 0) pageData = $pageEl[0].f7Page;\n    }\n\n    if (pageData && pageData.$navbarEl && pageData.$navbarEl.length > 0) {\n      $navbarEl = pageData.$navbarEl;\n    } else if ($pageEl) {\n      $navbarEl = $pageEl.children('.navbar');\n    }\n\n    if (!$navbarEl || $navbarEl && $navbarEl.length === 0) return undefined;\n    return $navbarEl[0];\n  },\n  getPageByEl: function getPageByEl(navbarEl) {\n    var $navbarEl = $(navbarEl);\n\n    if ($navbarEl.parents('.page').length) {\n      return $navbarEl.parents('.page')[0];\n    }\n\n    var pageEl;\n    $navbarEl.parents('.view').find('.page').each(function (el) {\n      if (el && el.f7Page && el.f7Page.navbarEl && $navbarEl[0] === el.f7Page.navbarEl) {\n        pageEl = el;\n      }\n    });\n    return pageEl;\n  },\n  collapseLargeTitle: function collapseLargeTitle(navbarEl) {\n    var app = this;\n    var $navbarEl = $(navbarEl);\n\n    if ($navbarEl.hasClass('navbars')) {\n      $navbarEl = $navbarEl.find('.navbar');\n\n      if ($navbarEl.length > 1) {\n        $navbarEl = $(navbarEl).find('.navbar-large.navbar-current');\n      }\n\n      if ($navbarEl.length > 1 || !$navbarEl.length) {\n        return;\n      }\n    }\n\n    var $pageEl = $(app.navbar.getPageByEl($navbarEl));\n    $navbarEl.addClass('navbar-large-collapsed');\n    $pageEl.eq(0).addClass('page-with-navbar-large-collapsed').trigger('page:navbarlargecollapsed');\n    app.emit('pageNavbarLargeCollapsed', $pageEl[0]);\n    $navbarEl.trigger('navbar:collapse');\n    app.emit('navbarCollapse', $navbarEl[0]);\n  },\n  expandLargeTitle: function expandLargeTitle(navbarEl) {\n    var app = this;\n    var $navbarEl = $(navbarEl);\n\n    if ($navbarEl.hasClass('navbars')) {\n      $navbarEl = $navbarEl.find('.navbar-large');\n\n      if ($navbarEl.length > 1) {\n        $navbarEl = $(navbarEl).find('.navbar-large.navbar-current');\n      }\n\n      if ($navbarEl.length > 1 || !$navbarEl.length) {\n        return;\n      }\n    }\n\n    var $pageEl = $(app.navbar.getPageByEl($navbarEl));\n    $navbarEl.removeClass('navbar-large-collapsed');\n    $pageEl.eq(0).removeClass('page-with-navbar-large-collapsed').trigger('page:navbarlargeexpanded');\n    app.emit('pageNavbarLargeExpanded', $pageEl[0]);\n    $navbarEl.trigger('navbar:expand');\n    app.emit('navbarExpand', $navbarEl[0]);\n  },\n  toggleLargeTitle: function toggleLargeTitle(navbarEl) {\n    var app = this;\n    var $navbarEl = $(navbarEl);\n\n    if ($navbarEl.hasClass('navbars')) {\n      $navbarEl = $navbarEl.find('.navbar-large');\n\n      if ($navbarEl.length > 1) {\n        $navbarEl = $(navbarEl).find('.navbar-large.navbar-current');\n      }\n\n      if ($navbarEl.length > 1 || !$navbarEl.length) {\n        return;\n      }\n    }\n\n    if ($navbarEl.hasClass('navbar-large-collapsed')) {\n      app.navbar.expandLargeTitle($navbarEl);\n    } else {\n      app.navbar.collapseLargeTitle($navbarEl);\n    }\n  },\n  initNavbarOnScroll: function initNavbarOnScroll(pageEl, navbarEl, needHide, needCollapse, needTransparent) {\n    var app = this;\n    var support = getSupport();\n    var $pageEl = $(pageEl);\n    var $navbarEl = $(navbarEl);\n    var $titleLargeEl = $navbarEl.find('.title-large');\n    var isLarge = $titleLargeEl.length || $navbarEl.hasClass('.navbar-large');\n    var navbarHideHeight = 44;\n    var snapPageScrollToLargeTitle = app.params.navbar.snapPageScrollToLargeTitle;\n    var snapPageScrollToTransparentNavbar = app.params.navbar.snapPageScrollToTransparentNavbar;\n    var previousScrollTop;\n    var currentScrollTop;\n    var scrollHeight;\n    var offsetHeight;\n    var reachEnd;\n    var action;\n    var navbarHidden;\n    var navbarCollapsed;\n    var navbarTitleLargeHeight;\n    var navbarOffsetHeight;\n\n    if (needCollapse || needHide && isLarge) {\n      navbarTitleLargeHeight = $navbarEl.css('--f7-navbar-large-title-height');\n\n      if (navbarTitleLargeHeight && navbarTitleLargeHeight.indexOf('px') >= 0) {\n        navbarTitleLargeHeight = parseInt(navbarTitleLargeHeight, 10);\n\n        if (Number.isNaN(navbarTitleLargeHeight) && $titleLargeEl.length) {\n          navbarTitleLargeHeight = $titleLargeEl[0].offsetHeight;\n        } else if (Number.isNaN(navbarTitleLargeHeight)) {\n          if (app.theme === 'ios') navbarTitleLargeHeight = 52;else if (app.theme === 'md') navbarTitleLargeHeight = 48;else if (app.theme === 'aurora') navbarTitleLargeHeight = 38;\n        }\n      } else if ($titleLargeEl.length) {\n        navbarTitleLargeHeight = $titleLargeEl[0].offsetHeight;\n      } else {\n        // eslint-disable-next-line\n        if (app.theme === 'ios') navbarTitleLargeHeight = 52;else if (app.theme === 'md') navbarTitleLargeHeight = 48;else if (app.theme === 'aurora') navbarTitleLargeHeight = 38;\n      }\n    }\n\n    if (needHide && isLarge) {\n      navbarHideHeight += navbarTitleLargeHeight;\n    }\n\n    var scrollChanged;\n    var scrollContent;\n    var scrollTimeoutId;\n    var touchEndTimeoutId;\n    var touchSnapTimeout = 70;\n    var desktopSnapTimeout = 300;\n\n    function calcScrollableDistance() {\n      $pageEl.find('.page-content').each(function (pageContentEl) {\n        pageContentEl.f7ScrollableDistance = pageContentEl.scrollHeight - pageContentEl.offsetHeight;\n      });\n    }\n\n    function snapLargeNavbar() {\n      var inSearchbarExpanded = $navbarEl.hasClass('with-searchbar-expandable-enabled');\n      if (inSearchbarExpanded) return;\n      if (!scrollContent || currentScrollTop < 0) return;\n\n      if (currentScrollTop >= navbarTitleLargeHeight / 2 && currentScrollTop < navbarTitleLargeHeight) {\n        $(scrollContent).scrollTop(navbarTitleLargeHeight, 100);\n      } else if (currentScrollTop < navbarTitleLargeHeight) {\n        $(scrollContent).scrollTop(0, 200);\n      }\n    }\n\n    function snapTransparentNavbar() {\n      var inSearchbarExpanded = $navbarEl.hasClass('with-searchbar-expandable-enabled');\n      if (inSearchbarExpanded) return;\n      if (!scrollContent || currentScrollTop < 0) return;\n\n      if (currentScrollTop >= navbarOffsetHeight / 2 && currentScrollTop < navbarOffsetHeight) {\n        $(scrollContent).scrollTop(navbarOffsetHeight, 100);\n      } else if (currentScrollTop < navbarOffsetHeight) {\n        $(scrollContent).scrollTop(0, 200);\n      }\n    }\n\n    function handleNavbarTransparent() {\n      var isHidden = $navbarEl.hasClass('navbar-hidden') || $navbarEl.parent('.navbars').hasClass('navbar-hidden');\n      var inSearchbarExpanded = $navbarEl.hasClass('with-searchbar-expandable-enabled');\n      if (inSearchbarExpanded || isHidden) return;\n\n      if (!navbarOffsetHeight) {\n        navbarOffsetHeight = navbarEl.offsetHeight;\n      }\n\n      var opacity = currentScrollTop / navbarOffsetHeight;\n      var notTransparent = $navbarEl.hasClass('navbar-transparent-visible');\n      opacity = Math.max(Math.min(opacity, 1), 0);\n\n      if (notTransparent && opacity === 1 || !notTransparent && opacity === 0) {\n        $navbarEl.find('.navbar-bg, .title').css('opacity', '');\n        return;\n      }\n\n      if (notTransparent && opacity === 0) {\n        $navbarEl.trigger('navbar:transparenthide');\n        app.emit('navbarTransparentHide', $navbarEl[0]);\n        $navbarEl.removeClass('navbar-transparent-visible');\n        $navbarEl.find('.navbar-bg, .title').css('opacity', '');\n        return;\n      }\n\n      if (!notTransparent && opacity === 1) {\n        $navbarEl.trigger('navbar:transparentshow');\n        app.emit('navbarTransparentShow', $navbarEl[0]);\n        $navbarEl.addClass('navbar-transparent-visible');\n        $navbarEl.find('.navbar-bg, .title').css('opacity', '');\n        return;\n      }\n\n      $navbarEl.find('.navbar-bg, .title').css('opacity', opacity);\n\n      if (snapPageScrollToTransparentNavbar) {\n        if (!support.touch) {\n          clearTimeout(scrollTimeoutId);\n          scrollTimeoutId = setTimeout(function () {\n            snapTransparentNavbar();\n          }, desktopSnapTimeout);\n        } else if (touchEndTimeoutId) {\n          clearTimeout(touchEndTimeoutId);\n          touchEndTimeoutId = null;\n          touchEndTimeoutId = setTimeout(function () {\n            snapTransparentNavbar();\n            clearTimeout(touchEndTimeoutId);\n            touchEndTimeoutId = null;\n          }, touchSnapTimeout);\n        }\n      }\n    }\n\n    var previousCollapseProgress = null;\n    var collapseProgress = null;\n\n    function handleLargeNavbarCollapse(pageContentEl) {\n      var isHidden = $navbarEl.hasClass('navbar-hidden') || $navbarEl.parent('.navbars').hasClass('navbar-hidden');\n      if (isHidden) return;\n      var isLargeTransparent = $navbarEl.hasClass('navbar-large-transparent') || $navbarEl.hasClass('navbar-large') && $navbarEl.hasClass('navbar-transparent');\n      previousCollapseProgress = collapseProgress;\n      var scrollableDistance = Math.min(navbarTitleLargeHeight, pageContentEl.f7ScrollableDistance || navbarTitleLargeHeight);\n      collapseProgress = Math.min(Math.max(currentScrollTop / scrollableDistance, 0), 1);\n      var previousCollapseWasInMiddle = previousCollapseProgress > 0 && previousCollapseProgress < 1;\n      var inSearchbarExpanded = $navbarEl.hasClass('with-searchbar-expandable-enabled');\n      if (inSearchbarExpanded) return;\n      navbarCollapsed = $navbarEl.hasClass('navbar-large-collapsed');\n\n      if (collapseProgress === 0 && navbarCollapsed) {\n        app.navbar.expandLargeTitle($navbarEl[0]);\n      } else if (collapseProgress === 1 && !navbarCollapsed) {\n        app.navbar.collapseLargeTitle($navbarEl[0]);\n      }\n\n      if (collapseProgress === 0 && navbarCollapsed || collapseProgress === 0 && previousCollapseWasInMiddle || collapseProgress === 1 && !navbarCollapsed || collapseProgress === 1 && previousCollapseWasInMiddle) {\n        if (app.theme === 'md') {\n          $navbarEl.find('.navbar-inner').css('overflow', '');\n        }\n\n        $navbarEl.find('.title').css('opacity', '');\n        $navbarEl.find('.title-large-text, .subnavbar').css('transform', '');\n\n        if (isLargeTransparent) {\n          $navbarEl.find('.navbar-bg').css('opacity', '');\n        } else {\n          $navbarEl.find('.navbar-bg').css('transform', '');\n        }\n      } else if (collapseProgress > 0 && collapseProgress < 1) {\n        if (app.theme === 'md') {\n          $navbarEl.find('.navbar-inner').css('overflow', 'visible');\n        }\n\n        $navbarEl.find('.title').css('opacity', collapseProgress);\n        $navbarEl.find('.title-large-text, .subnavbar').css('transform', \"translate3d(0px, \" + -1 * collapseProgress * navbarTitleLargeHeight + \"px, 0)\");\n\n        if (isLargeTransparent) {\n          $navbarEl.find('.navbar-bg').css('opacity', collapseProgress);\n        } else {\n          $navbarEl.find('.navbar-bg').css('transform', \"translate3d(0px, \" + -1 * collapseProgress * navbarTitleLargeHeight + \"px, 0)\");\n        }\n      }\n\n      if (snapPageScrollToLargeTitle) {\n        if (!support.touch) {\n          clearTimeout(scrollTimeoutId);\n          scrollTimeoutId = setTimeout(function () {\n            snapLargeNavbar();\n          }, desktopSnapTimeout);\n        } else if (touchEndTimeoutId) {\n          clearTimeout(touchEndTimeoutId);\n          touchEndTimeoutId = null;\n          touchEndTimeoutId = setTimeout(function () {\n            snapLargeNavbar();\n            clearTimeout(touchEndTimeoutId);\n            touchEndTimeoutId = null;\n          }, touchSnapTimeout);\n        }\n      }\n    }\n\n    function handleTitleHideShow() {\n      if ($pageEl.hasClass('page-with-card-opened')) return;\n      scrollHeight = scrollContent.scrollHeight;\n      offsetHeight = scrollContent.offsetHeight;\n      reachEnd = currentScrollTop + offsetHeight >= scrollHeight;\n      navbarHidden = $navbarEl.hasClass('navbar-hidden') || $navbarEl.parent('.navbars').hasClass('navbar-hidden');\n\n      if (reachEnd) {\n        if (app.params.navbar.showOnPageScrollEnd) {\n          action = 'show';\n        }\n      } else if (previousScrollTop > currentScrollTop) {\n        if (app.params.navbar.showOnPageScrollTop || currentScrollTop <= navbarHideHeight) {\n          action = 'show';\n        } else {\n          action = 'hide';\n        }\n      } else if (currentScrollTop > navbarHideHeight) {\n        action = 'hide';\n      } else {\n        action = 'show';\n      }\n\n      if (action === 'show' && navbarHidden) {\n        app.navbar.show($navbarEl, true, true);\n        navbarHidden = false;\n      } else if (action === 'hide' && !navbarHidden) {\n        app.navbar.hide($navbarEl, true, false, true);\n        navbarHidden = true;\n      }\n\n      previousScrollTop = currentScrollTop;\n    }\n\n    function handleScroll(e) {\n      scrollContent = this;\n\n      if (e && e.target && e.target !== scrollContent) {\n        return;\n      }\n\n      currentScrollTop = scrollContent.scrollTop;\n      scrollChanged = currentScrollTop;\n\n      if (needCollapse) {\n        handleLargeNavbarCollapse(scrollContent);\n      } else if (needTransparent) {\n        handleNavbarTransparent();\n      }\n\n      if ($pageEl.hasClass('page-previous')) return;\n\n      if (needHide) {\n        handleTitleHideShow();\n      }\n    }\n\n    function handeTouchStart() {\n      scrollChanged = false;\n    }\n\n    function handleTouchEnd() {\n      clearTimeout(touchEndTimeoutId);\n      touchEndTimeoutId = null;\n      touchEndTimeoutId = setTimeout(function () {\n        if (scrollChanged !== false) {\n          if (needTransparent && !needCollapse) {\n            snapTransparentNavbar();\n          } else {\n            snapLargeNavbar();\n          }\n\n          clearTimeout(touchEndTimeoutId);\n          touchEndTimeoutId = null;\n        }\n      }, touchSnapTimeout);\n    }\n\n    $pageEl.on('scroll', '.page-content', handleScroll, true);\n\n    if (support.touch && (needCollapse && snapPageScrollToLargeTitle || needTransparent && snapPageScrollToTransparentNavbar)) {\n      app.on('touchstart:passive', handeTouchStart);\n      app.on('touchend:passive', handleTouchEnd);\n    }\n\n    calcScrollableDistance();\n\n    if (needCollapse || needTransparent) {\n      $pageEl.find('.page-content').each(function (pageContentEl) {\n        if (pageContentEl.scrollTop > 0) handleScroll.call(pageContentEl);\n      });\n    }\n\n    app.on('resize', calcScrollableDistance);\n\n    $pageEl[0].f7DetachNavbarScrollHandlers = function f7DetachNavbarScrollHandlers() {\n      app.off('resize', calcScrollableDistance);\n      delete $pageEl[0].f7DetachNavbarScrollHandlers;\n      $pageEl.off('scroll', '.page-content', handleScroll, true);\n\n      if (support.touch && (needCollapse && snapPageScrollToLargeTitle || needTransparent && snapPageScrollToTransparentNavbar)) {\n        app.off('touchstart:passive', handeTouchStart);\n        app.off('touchend:passive', handleTouchEnd);\n      }\n    };\n  }\n};\nexport default {\n  name: 'navbar',\n  create: function create() {\n    var app = this;\n    bindMethods(app, {\n      navbar: Navbar\n    });\n  },\n  params: {\n    navbar: {\n      scrollTopOnTitleClick: true,\n      iosCenterTitle: true,\n      mdCenterTitle: false,\n      auroraCenterTitle: true,\n      hideOnPageScroll: false,\n      showOnPageScrollEnd: true,\n      showOnPageScrollTop: true,\n      collapseLargeTitleOnScroll: true,\n      snapPageScrollToLargeTitle: true,\n      snapPageScrollToTransparentNavbar: true\n    }\n  },\n  on: {\n    'panelBreakpoint panelCollapsedBreakpoint panelResize viewResize resize viewMasterDetailBreakpoint': function onPanelResize() {\n      var app = this;\n      $('.navbar').each(function (navbarEl) {\n        app.navbar.size(navbarEl);\n      });\n    },\n    pageBeforeRemove: function pageBeforeRemove(page) {\n      if (page.$el[0].f7DetachNavbarScrollHandlers) {\n        page.$el[0].f7DetachNavbarScrollHandlers();\n      }\n    },\n    pageBeforeIn: function pageBeforeIn(page) {\n      var app = this;\n      if (app.theme !== 'ios') return;\n      var $navbarsEl;\n      var view = page.$el.parents('.view')[0].f7View;\n      var navbarEl = app.navbar.getElByPage(page);\n\n      if (!navbarEl) {\n        $navbarsEl = page.$el.parents('.view').children('.navbars');\n      } else {\n        $navbarsEl = $(navbarEl).parents('.navbars');\n      }\n\n      if (page.$el.hasClass('no-navbar') || view.router.dynamicNavbar && !navbarEl) {\n        var animate = !!(page.pageFrom && page.router.history.length > 0);\n        app.navbar.hide($navbarsEl, animate);\n      } else {\n        app.navbar.show($navbarsEl);\n      }\n    },\n    pageReinit: function pageReinit(page) {\n      var app = this;\n      var $navbarEl = $(app.navbar.getElByPage(page));\n      if (!$navbarEl || $navbarEl.length === 0) return;\n      app.navbar.size($navbarEl);\n    },\n    pageInit: function pageInit(page) {\n      var app = this;\n      var $navbarEl = $(app.navbar.getElByPage(page));\n      if (!$navbarEl || $navbarEl.length === 0) return; // Size\n\n      app.navbar.size($navbarEl); // Need Collapse On Scroll\n\n      var needCollapseOnScrollHandler;\n\n      if ($navbarEl.find('.title-large').length > 0) {\n        $navbarEl.addClass('navbar-large');\n      }\n\n      if ($navbarEl.hasClass('navbar-large')) {\n        if (app.params.navbar.collapseLargeTitleOnScroll) needCollapseOnScrollHandler = true;\n        page.$el.addClass('page-with-navbar-large');\n      } // Need transparent on scroll\n\n\n      var needTransparentOnScroll;\n\n      if (!needCollapseOnScrollHandler && $navbarEl.hasClass('navbar-transparent')) {\n        needTransparentOnScroll = true;\n      } // Need Hide On Scroll\n\n\n      var needHideOnScrollHandler;\n\n      if (app.params.navbar.hideOnPageScroll || page.$el.find('.hide-navbar-on-scroll').length || page.$el.hasClass('hide-navbar-on-scroll') || page.$el.find('.hide-bars-on-scroll').length || page.$el.hasClass('hide-bars-on-scroll')) {\n        if (page.$el.find('.keep-navbar-on-scroll').length || page.$el.hasClass('keep-navbar-on-scroll') || page.$el.find('.keep-bars-on-scroll').length || page.$el.hasClass('keep-bars-on-scroll')) {\n          needHideOnScrollHandler = false;\n        } else {\n          needHideOnScrollHandler = true;\n        }\n      }\n\n      if (needCollapseOnScrollHandler || needHideOnScrollHandler || needTransparentOnScroll) {\n        app.navbar.initNavbarOnScroll(page.el, $navbarEl[0], needHideOnScrollHandler, needCollapseOnScrollHandler, needTransparentOnScroll);\n      }\n    },\n    'panelOpen panelSwipeOpen modalOpen': function onPanelModalOpen(instance) {\n      var app = this;\n      instance.$el.find('.navbar:not(.navbar-previous):not(.stacked)').each(function (navbarEl) {\n        app.navbar.size(navbarEl);\n      });\n    },\n    tabShow: function tabShow(tabEl) {\n      var app = this;\n      $(tabEl).find('.navbar:not(.navbar-previous):not(.stacked)').each(function (navbarEl) {\n        app.navbar.size(navbarEl);\n      });\n    }\n  },\n  clicks: {\n    '.navbar .title': function onTitleClick($clickedEl, clickedData, e) {\n      var app = this;\n      if (!app.params.navbar.scrollTopOnTitleClick) return;\n\n      if ($(e.target).closest('a, button').length > 0) {\n        return;\n      }\n\n      var $pageContentEl; // Find active page\n\n      var $navbarEl = $clickedEl.parents('.navbar');\n      var $navbarsEl = $navbarEl.parents('.navbars'); // Static Layout\n\n      $pageContentEl = $navbarEl.parents('.page-content');\n\n      if ($pageContentEl.length === 0) {\n        // Fixed Layout\n        if ($navbarEl.parents('.page').length > 0) {\n          $pageContentEl = $navbarEl.parents('.page').find('.page-content');\n        } // Through Layout iOS\n\n\n        if ($pageContentEl.length === 0 && $navbarsEl.length) {\n          if ($navbarsEl.nextAll('.page-current:not(.stacked)').length > 0) {\n            $pageContentEl = $navbarsEl.nextAll('.page-current:not(.stacked)').find('.page-content');\n          }\n        } // Through Layout\n\n\n        if ($pageContentEl.length === 0) {\n          if ($navbarEl.nextAll('.page-current:not(.stacked)').length > 0) {\n            $pageContentEl = $navbarEl.nextAll('.page-current:not(.stacked)').find('.page-content');\n          }\n        }\n      }\n\n      if ($pageContentEl && $pageContentEl.length > 0) {\n        // Check for tab\n        if ($pageContentEl.hasClass('tab')) {\n          $pageContentEl = $pageContentEl.parent('.tabs').children('.page-content.tab-active');\n        }\n\n        if ($pageContentEl.length > 0) $pageContentEl.scrollTop(0, 300);\n      }\n    }\n  },\n  vnode: {\n    navbar: {\n      postpatch: function postpatch(vnode) {\n        var app = this;\n        app.navbar.size(vnode.elm);\n      }\n    }\n  }\n};"]},"metadata":{},"sourceType":"module"}