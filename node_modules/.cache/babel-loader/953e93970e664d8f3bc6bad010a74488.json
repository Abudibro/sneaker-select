{"ast":null,"code":"function _assertThisInitialized(self) {\n  if (self === void 0) {\n    throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\");\n  }\n\n  return self;\n}\n\nfunction _inheritsLoose(subClass, superClass) {\n  subClass.prototype = Object.create(superClass.prototype);\n  subClass.prototype.constructor = subClass;\n\n  _setPrototypeOf(subClass, superClass);\n}\n\nfunction _wrapNativeSuper(Class) {\n  var _cache = typeof Map === \"function\" ? new Map() : undefined;\n\n  _wrapNativeSuper = function _wrapNativeSuper(Class) {\n    if (Class === null || !_isNativeFunction(Class)) return Class;\n\n    if (typeof Class !== \"function\") {\n      throw new TypeError(\"Super expression must either be null or a function\");\n    }\n\n    if (typeof _cache !== \"undefined\") {\n      if (_cache.has(Class)) return _cache.get(Class);\n\n      _cache.set(Class, Wrapper);\n    }\n\n    function Wrapper() {\n      return _construct(Class, arguments, _getPrototypeOf(this).constructor);\n    }\n\n    Wrapper.prototype = Object.create(Class.prototype, {\n      constructor: {\n        value: Wrapper,\n        enumerable: false,\n        writable: true,\n        configurable: true\n      }\n    });\n    return _setPrototypeOf(Wrapper, Class);\n  };\n\n  return _wrapNativeSuper(Class);\n}\n\nfunction _construct(Parent, args, Class) {\n  if (_isNativeReflectConstruct()) {\n    _construct = Reflect.construct;\n  } else {\n    _construct = function _construct(Parent, args, Class) {\n      var a = [null];\n      a.push.apply(a, args);\n      var Constructor = Function.bind.apply(Parent, a);\n      var instance = new Constructor();\n      if (Class) _setPrototypeOf(instance, Class.prototype);\n      return instance;\n    };\n  }\n\n  return _construct.apply(null, arguments);\n}\n\nfunction _isNativeReflectConstruct() {\n  if (typeof Reflect === \"undefined\" || !Reflect.construct) return false;\n  if (Reflect.construct.sham) return false;\n  if (typeof Proxy === \"function\") return true;\n\n  try {\n    Boolean.prototype.valueOf.call(Reflect.construct(Boolean, [], function () {}));\n    return true;\n  } catch (e) {\n    return false;\n  }\n}\n\nfunction _isNativeFunction(fn) {\n  return Function.toString.call(fn).indexOf(\"[native code]\") !== -1;\n}\n\nfunction _setPrototypeOf(o, p) {\n  _setPrototypeOf = Object.setPrototypeOf || function _setPrototypeOf(o, p) {\n    o.__proto__ = p;\n    return o;\n  };\n\n  return _setPrototypeOf(o, p);\n}\n\nfunction _getPrototypeOf(o) {\n  _getPrototypeOf = Object.setPrototypeOf ? Object.getPrototypeOf : function _getPrototypeOf(o) {\n    return o.__proto__ || Object.getPrototypeOf(o);\n  };\n  return _getPrototypeOf(o);\n}\n/* eslint-disable max-classes-per-file */\n\n\nimport { getWindow, getDocument } from 'ssr-window';\nimport { extend, serializeObject } from './utils';\nvar globals = {};\nvar jsonpRequests = 0;\n\nvar RequestResponse = function RequestResponse(obj) {\n  Object.assign(this, obj);\n};\n\nvar RequestError = /*#__PURE__*/function (_Error) {\n  _inheritsLoose(RequestError, _Error);\n\n  function RequestError(obj) {\n    var _this;\n\n    _this = _Error.call(this) || this;\n    Object.assign(_assertThisInitialized(_this), obj);\n    return _this;\n  }\n\n  return RequestError;\n}( /*#__PURE__*/_wrapNativeSuper(Error));\n\nvar request = function request(requestOptions) {\n  return new Promise(function (resolve, reject) {\n    var window = getWindow();\n    var document = getDocument();\n    var globalsNoCallbacks = extend({}, globals);\n    'beforeCreate beforeOpen beforeSend error complete success statusCode'.split(' ').forEach(function (callbackName) {\n      delete globalsNoCallbacks[callbackName];\n    });\n    var defaults = extend({\n      url: window.location.toString(),\n      method: 'GET',\n      data: false,\n      async: true,\n      cache: true,\n      user: '',\n      password: '',\n      headers: {},\n      xhrFields: {},\n      statusCode: {},\n      processData: true,\n      dataType: 'text',\n      contentType: 'application/x-www-form-urlencoded',\n      timeout: 0\n    }, globalsNoCallbacks);\n    var proceedRequest;\n    var options = extend({}, defaults, requestOptions);\n\n    if (requestOptions.abortController) {\n      options.abortController = requestOptions.abortController;\n    }\n\n    if (options.abortController && options.abortController.canceled) {\n      reject(new RequestError({\n        options: options,\n        status: 'canceled',\n        message: 'canceled'\n      }));\n      return;\n    } // Function to run XHR callbacks and events\n\n\n    function fireCallback(callbackName) {\n      /*\n      Callbacks:\n      beforeCreate (options),\n      beforeOpen (xhr, options),\n      beforeSend (xhr, options),\n      error (xhr, status, message),\n      complete (xhr, status),\n      success (response, status, xhr),\n      statusCode ()\n      */\n      var globalCallbackValue;\n      var optionCallbackValue;\n\n      for (var _len = arguments.length, data = new Array(_len > 1 ? _len - 1 : 0), _key = 1; _key < _len; _key++) {\n        data[_key - 1] = arguments[_key];\n      }\n\n      if (globals[callbackName]) {\n        globalCallbackValue = globals[callbackName].apply(globals, data);\n      }\n\n      if (options[callbackName]) {\n        optionCallbackValue = options[callbackName].apply(options, data);\n      }\n\n      if (typeof globalCallbackValue !== 'boolean') globalCallbackValue = true;\n      if (typeof optionCallbackValue !== 'boolean') optionCallbackValue = true;\n\n      if (options.abortController && options.abortController.canceled && (callbackName === 'beforeCreate' || callbackName === 'beforeOpen' || callbackName === 'beforeSend')) {\n        return false;\n      }\n\n      return globalCallbackValue && optionCallbackValue;\n    } // Before create callback\n\n\n    proceedRequest = fireCallback('beforeCreate', options);\n\n    if (proceedRequest === false) {\n      reject(new RequestError({\n        options: options,\n        status: 'canceled',\n        message: 'canceled'\n      }));\n      return;\n    } // For jQuery guys\n\n\n    if (options.type) options.method = options.type; // Parameters Prefix\n\n    var paramsPrefix = options.url.indexOf('?') >= 0 ? '&' : '?'; // UC method\n\n    var method = options.method.toUpperCase(); // Data to modify GET URL\n\n    if ((method === 'GET' || method === 'HEAD' || method === 'OPTIONS' || method === 'DELETE') && options.data) {\n      var stringData;\n\n      if (typeof options.data === 'string') {\n        // Should be key=value string\n        if (options.data.indexOf('?') >= 0) stringData = options.data.split('?')[1];else stringData = options.data;\n      } else {\n        // Should be key=value object\n        stringData = serializeObject(options.data);\n      }\n\n      if (stringData.length) {\n        options.url += paramsPrefix + stringData;\n        if (paramsPrefix === '?') paramsPrefix = '&';\n      }\n    } // JSONP\n\n\n    if (options.dataType === 'json' && options.url.indexOf('callback=') >= 0) {\n      var callbackName = \"f7jsonp_\" + (Date.now() + (jsonpRequests += 1));\n      var abortTimeout;\n      var callbackSplit = options.url.split('callback=');\n      var requestUrl = callbackSplit[0] + \"callback=\" + callbackName;\n\n      if (callbackSplit[1].indexOf('&') >= 0) {\n        var addVars = callbackSplit[1].split('&').filter(function (el) {\n          return el.indexOf('=') > 0;\n        }).join('&');\n        if (addVars.length > 0) requestUrl += \"&\" + addVars;\n      } // Create script\n\n\n      var script = document.createElement('script');\n      script.type = 'text/javascript';\n\n      script.onerror = function onerror() {\n        clearTimeout(abortTimeout);\n        fireCallback('error', null, 'scripterror', 'scripterror');\n        reject(new RequestError({\n          options: options,\n          status: 'scripterror',\n          message: 'scripterror'\n        }));\n        fireCallback('complete', null, 'scripterror');\n      };\n\n      script.src = requestUrl; // Handler\n\n      window[callbackName] = function jsonpCallback(data) {\n        clearTimeout(abortTimeout);\n        fireCallback('success', data);\n        script.parentNode.removeChild(script);\n        script = null;\n        delete window[callbackName];\n        resolve(new RequestResponse({\n          options: options,\n          data: data\n        }));\n      };\n\n      document.querySelector('head').appendChild(script);\n\n      if (options.timeout > 0) {\n        abortTimeout = setTimeout(function () {\n          script.parentNode.removeChild(script);\n          script = null;\n          fireCallback('error', null, 'timeout', 'timeout');\n          reject(new RequestError({\n            options: options,\n            status: 'timeout',\n            message: 'timeout'\n          }));\n        }, options.timeout);\n      }\n\n      return;\n    } // Cache for GET/HEAD requests\n\n\n    if (method === 'GET' || method === 'HEAD' || method === 'OPTIONS' || method === 'DELETE') {\n      if (options.cache === false) {\n        options.url += paramsPrefix + \"_nocache\" + Date.now();\n      }\n    } // Create XHR\n\n\n    var xhr = new XMLHttpRequest();\n\n    if (options.abortController) {\n      var aborted = false;\n\n      options.abortController.onAbort = function () {\n        if (aborted) return;\n        aborted = true;\n        xhr.abort();\n        reject(new RequestError({\n          options: options,\n          xhr: xhr,\n          status: 'canceled',\n          message: 'canceled'\n        }));\n      };\n    } // Save Request URL\n\n\n    xhr.requestUrl = options.url;\n    xhr.requestParameters = options; // Before open callback\n\n    proceedRequest = fireCallback('beforeOpen', xhr, options);\n\n    if (proceedRequest === false) {\n      reject(new RequestError({\n        options: options,\n        xhr: xhr,\n        status: 'canceled',\n        message: 'canceled'\n      }));\n      return;\n    } // Open XHR\n\n\n    xhr.open(method, options.url, options.async, options.user, options.password); // Create POST Data\n\n    var postData = null;\n\n    if ((method === 'POST' || method === 'PUT' || method === 'PATCH') && options.data) {\n      if (options.processData) {\n        var postDataInstances = [ArrayBuffer, Blob, Document, FormData]; // Post Data\n\n        if (postDataInstances.indexOf(options.data.constructor) >= 0) {\n          postData = options.data;\n        } else {\n          // POST Headers\n          var boundary = \"---------------------------\" + Date.now().toString(16);\n\n          if (options.contentType === 'multipart/form-data') {\n            xhr.setRequestHeader('Content-Type', \"multipart/form-data; boundary=\" + boundary);\n          } else {\n            xhr.setRequestHeader('Content-Type', options.contentType);\n          }\n\n          postData = '';\n          var data = serializeObject(options.data);\n\n          if (options.contentType === 'multipart/form-data') {\n            data = data.split('&');\n            var newData = [];\n\n            for (var i = 0; i < data.length; i += 1) {\n              newData.push(\"Content-Disposition: form-data; name=\\\"\" + data[i].split('=')[0] + \"\\\"\\r\\n\\r\\n\" + data[i].split('=')[1] + \"\\r\\n\");\n            }\n\n            postData = \"--\" + boundary + \"\\r\\n\" + newData.join(\"--\" + boundary + \"\\r\\n\") + \"--\" + boundary + \"--\\r\\n\";\n          } else if (options.contentType === 'application/json') {\n            postData = JSON.stringify(options.data);\n          } else {\n            postData = data;\n          }\n        }\n      } else {\n        postData = options.data;\n        xhr.setRequestHeader('Content-Type', options.contentType);\n      }\n    }\n\n    if (options.dataType === 'json' && (!options.headers || !options.headers.Accept)) {\n      xhr.setRequestHeader('Accept', 'application/json');\n    } // Additional headers\n\n\n    if (options.headers) {\n      Object.keys(options.headers).forEach(function (headerName) {\n        if (typeof options.headers[headerName] === 'undefined') return;\n        xhr.setRequestHeader(headerName, options.headers[headerName]);\n      });\n    } // Check for crossDomain\n\n\n    if (typeof options.crossDomain === 'undefined') {\n      options.crossDomain = // eslint-disable-next-line\n      /^([\\w-]+:)?\\/\\/([^\\/]+)/.test(options.url) && RegExp.$2 !== window.location.host;\n    }\n\n    if (!options.crossDomain) {\n      xhr.setRequestHeader('X-Requested-With', 'XMLHttpRequest');\n    }\n\n    if (options.xhrFields) {\n      extend(xhr, options.xhrFields);\n    } // Handle XHR\n\n\n    xhr.onload = function onload() {\n      if (xhr.status >= 200 && xhr.status < 300 || xhr.status === 0) {\n        var responseData;\n\n        if (options.dataType === 'json') {\n          var parseError;\n\n          try {\n            responseData = JSON.parse(xhr.responseText);\n          } catch (err) {\n            parseError = true;\n          }\n\n          if (!parseError) {\n            fireCallback('success', responseData, xhr.status, xhr);\n            resolve(new RequestResponse({\n              options: options,\n              data: responseData,\n              status: xhr.status,\n              xhr: xhr\n            }));\n          } else {\n            fireCallback('error', xhr, 'parseerror', 'parseerror');\n            reject(new RequestError({\n              options: options,\n              xhr: xhr,\n              status: 'parseerror',\n              message: 'parseerror'\n            }));\n          }\n        } else {\n          responseData = xhr.responseType === 'text' || xhr.responseType === '' ? xhr.responseText : xhr.response;\n          fireCallback('success', responseData, xhr.status, xhr);\n          resolve(new RequestResponse({\n            options: options,\n            data: responseData,\n            status: xhr.status,\n            xhr: xhr\n          }));\n        }\n      } else {\n        fireCallback('error', xhr, xhr.status, xhr.statusText);\n        reject(new RequestError({\n          options: options,\n          xhr: xhr,\n          status: xhr.status,\n          message: xhr.statusText\n        }));\n      }\n\n      if (options.statusCode) {\n        if (globals.statusCode && globals.statusCode[xhr.status]) globals.statusCode[xhr.status](xhr);\n        if (options.statusCode[xhr.status]) options.statusCode[xhr.status](xhr);\n      }\n\n      fireCallback('complete', xhr, xhr.status);\n    };\n\n    xhr.onerror = function onerror() {\n      fireCallback('error', xhr, xhr.status, xhr.status);\n      reject(new RequestError({\n        options: options,\n        xhr: xhr,\n        status: xhr.status,\n        message: xhr.statusText\n      }));\n      fireCallback('complete', xhr, 'error');\n    }; // Timeout\n\n\n    if (options.timeout > 0) {\n      xhr.timeout = options.timeout;\n\n      xhr.ontimeout = function () {\n        fireCallback('error', xhr, 'timeout', 'timeout');\n        reject(new RequestError({\n          options: options,\n          xhr: xhr,\n          status: 'timeout',\n          message: 'timeout'\n        }));\n        fireCallback('complete', xhr, 'timeout');\n      };\n    } // Ajax start callback\n\n\n    proceedRequest = fireCallback('beforeSend', xhr, options);\n\n    if (proceedRequest === false) {\n      reject(new RequestError({\n        options: options,\n        xhr: xhr,\n        status: 'canceled',\n        message: 'canceled'\n      }));\n      return;\n    } // Send XHR\n\n\n    xhr.send(postData);\n  });\n};\n\nfunction requestShortcut(method) {\n  var _ref = [],\n      url = _ref[0],\n      data = _ref[1],\n      success = _ref[2],\n      error = _ref[3],\n      dataType = _ref[4];\n\n  for (var _len2 = arguments.length, args = new Array(_len2 > 1 ? _len2 - 1 : 0), _key2 = 1; _key2 < _len2; _key2++) {\n    args[_key2 - 1] = arguments[_key2];\n  }\n\n  if (typeof args[1] === 'function') {\n    url = args[0];\n    success = args[1];\n    error = args[2];\n    dataType = args[3];\n  } else {\n    url = args[0];\n    data = args[1];\n    success = args[2];\n    error = args[3];\n    dataType = args[4];\n  }\n\n  [success, error].forEach(function (callback) {\n    if (typeof callback === 'string') {\n      dataType = callback;\n      if (callback === success) success = undefined;else error = undefined;\n    }\n  });\n  dataType = dataType || (method === 'json' || method === 'postJSON' ? 'json' : undefined);\n  var requestOptions = {\n    url: url,\n    method: method === 'post' || method === 'postJSON' ? 'POST' : 'GET',\n    data: data,\n    success: success,\n    error: error,\n    dataType: dataType\n  };\n\n  if (method === 'postJSON') {\n    extend(requestOptions, {\n      contentType: 'application/json',\n      processData: false,\n      crossDomain: true,\n      data: typeof data === 'string' ? data : JSON.stringify(data)\n    });\n  }\n\n  return request(requestOptions);\n}\n\nObject.assign(request, {\n  get: function get() {\n    for (var _len3 = arguments.length, args = new Array(_len3), _key3 = 0; _key3 < _len3; _key3++) {\n      args[_key3] = arguments[_key3];\n    }\n\n    return requestShortcut.apply(void 0, ['get'].concat(args));\n  },\n  post: function post() {\n    for (var _len4 = arguments.length, args = new Array(_len4), _key4 = 0; _key4 < _len4; _key4++) {\n      args[_key4] = arguments[_key4];\n    }\n\n    return requestShortcut.apply(void 0, ['post'].concat(args));\n  },\n  json: function json() {\n    for (var _len5 = arguments.length, args = new Array(_len5), _key5 = 0; _key5 < _len5; _key5++) {\n      args[_key5] = arguments[_key5];\n    }\n\n    return requestShortcut.apply(void 0, ['json'].concat(args));\n  },\n  getJSON: function getJSON() {\n    for (var _len6 = arguments.length, args = new Array(_len6), _key6 = 0; _key6 < _len6; _key6++) {\n      args[_key6] = arguments[_key6];\n    }\n\n    return requestShortcut.apply(void 0, ['json'].concat(args));\n  },\n  postJSON: function postJSON() {\n    for (var _len7 = arguments.length, args = new Array(_len7), _key7 = 0; _key7 < _len7; _key7++) {\n      args[_key7] = arguments[_key7];\n    }\n\n    return requestShortcut.apply(void 0, ['postJSON'].concat(args));\n  }\n});\n\nrequest.abortController = function () {\n  var contoller = {\n    canceled: false,\n    onAbort: null,\n    abort: function abort() {\n      contoller.canceled = true;\n      if (contoller.onAbort) contoller.onAbort();\n    }\n  };\n  return contoller;\n};\n\nrequest.setup = function setup(options) {\n  if (options.type && !options.method) {\n    extend(options, {\n      method: options.type\n    });\n  }\n\n  extend(globals, options);\n};\n\nexport default request;","map":{"version":3,"sources":["/Users/abdurahmanhijazi/Desktop/Projects/NikeShop/nikeshopfrontend/node_modules/framework7/esm/shared/request.js"],"names":["_assertThisInitialized","self","ReferenceError","_inheritsLoose","subClass","superClass","prototype","Object","create","constructor","_setPrototypeOf","_wrapNativeSuper","Class","_cache","Map","undefined","_isNativeFunction","TypeError","has","get","set","Wrapper","_construct","arguments","_getPrototypeOf","value","enumerable","writable","configurable","Parent","args","_isNativeReflectConstruct","Reflect","construct","a","push","apply","Constructor","Function","bind","instance","sham","Proxy","Boolean","valueOf","call","e","fn","toString","indexOf","o","p","setPrototypeOf","__proto__","getPrototypeOf","getWindow","getDocument","extend","serializeObject","globals","jsonpRequests","RequestResponse","obj","assign","RequestError","_Error","_this","Error","request","requestOptions","Promise","resolve","reject","window","document","globalsNoCallbacks","split","forEach","callbackName","defaults","url","location","method","data","async","cache","user","password","headers","xhrFields","statusCode","processData","dataType","contentType","timeout","proceedRequest","options","abortController","canceled","status","message","fireCallback","globalCallbackValue","optionCallbackValue","_len","length","Array","_key","type","paramsPrefix","toUpperCase","stringData","Date","now","abortTimeout","callbackSplit","requestUrl","addVars","filter","el","join","script","createElement","onerror","clearTimeout","src","jsonpCallback","parentNode","removeChild","querySelector","appendChild","setTimeout","xhr","XMLHttpRequest","aborted","onAbort","abort","requestParameters","open","postData","postDataInstances","ArrayBuffer","Blob","Document","FormData","boundary","setRequestHeader","newData","i","JSON","stringify","Accept","keys","headerName","crossDomain","test","RegExp","$2","host","onload","responseData","parseError","parse","responseText","err","responseType","response","statusText","ontimeout","send","requestShortcut","_ref","success","error","_len2","_key2","callback","_len3","_key3","concat","post","_len4","_key4","json","_len5","_key5","getJSON","_len6","_key6","postJSON","_len7","_key7","contoller","setup"],"mappings":"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","sourcesContent":["function _assertThisInitialized(self) { if (self === void 0) { throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\"); } return self; }\n\nfunction _inheritsLoose(subClass, superClass) { subClass.prototype = Object.create(superClass.prototype); subClass.prototype.constructor = subClass; _setPrototypeOf(subClass, superClass); }\n\nfunction _wrapNativeSuper(Class) { var _cache = typeof Map === \"function\" ? new Map() : undefined; _wrapNativeSuper = function _wrapNativeSuper(Class) { if (Class === null || !_isNativeFunction(Class)) return Class; if (typeof Class !== \"function\") { throw new TypeError(\"Super expression must either be null or a function\"); } if (typeof _cache !== \"undefined\") { if (_cache.has(Class)) return _cache.get(Class); _cache.set(Class, Wrapper); } function Wrapper() { return _construct(Class, arguments, _getPrototypeOf(this).constructor); } Wrapper.prototype = Object.create(Class.prototype, { constructor: { value: Wrapper, enumerable: false, writable: true, configurable: true } }); return _setPrototypeOf(Wrapper, Class); }; return _wrapNativeSuper(Class); }\n\nfunction _construct(Parent, args, Class) { if (_isNativeReflectConstruct()) { _construct = Reflect.construct; } else { _construct = function _construct(Parent, args, Class) { var a = [null]; a.push.apply(a, args); var Constructor = Function.bind.apply(Parent, a); var instance = new Constructor(); if (Class) _setPrototypeOf(instance, Class.prototype); return instance; }; } return _construct.apply(null, arguments); }\n\nfunction _isNativeReflectConstruct() { if (typeof Reflect === \"undefined\" || !Reflect.construct) return false; if (Reflect.construct.sham) return false; if (typeof Proxy === \"function\") return true; try { Boolean.prototype.valueOf.call(Reflect.construct(Boolean, [], function () {})); return true; } catch (e) { return false; } }\n\nfunction _isNativeFunction(fn) { return Function.toString.call(fn).indexOf(\"[native code]\") !== -1; }\n\nfunction _setPrototypeOf(o, p) { _setPrototypeOf = Object.setPrototypeOf || function _setPrototypeOf(o, p) { o.__proto__ = p; return o; }; return _setPrototypeOf(o, p); }\n\nfunction _getPrototypeOf(o) { _getPrototypeOf = Object.setPrototypeOf ? Object.getPrototypeOf : function _getPrototypeOf(o) { return o.__proto__ || Object.getPrototypeOf(o); }; return _getPrototypeOf(o); }\n\n/* eslint-disable max-classes-per-file */\nimport { getWindow, getDocument } from 'ssr-window';\nimport { extend, serializeObject } from './utils';\nvar globals = {};\nvar jsonpRequests = 0;\n\nvar RequestResponse = function RequestResponse(obj) {\n  Object.assign(this, obj);\n};\n\nvar RequestError = /*#__PURE__*/function (_Error) {\n  _inheritsLoose(RequestError, _Error);\n\n  function RequestError(obj) {\n    var _this;\n\n    _this = _Error.call(this) || this;\n    Object.assign(_assertThisInitialized(_this), obj);\n    return _this;\n  }\n\n  return RequestError;\n}( /*#__PURE__*/_wrapNativeSuper(Error));\n\nvar request = function request(requestOptions) {\n  return new Promise(function (resolve, reject) {\n    var window = getWindow();\n    var document = getDocument();\n    var globalsNoCallbacks = extend({}, globals);\n    'beforeCreate beforeOpen beforeSend error complete success statusCode'.split(' ').forEach(function (callbackName) {\n      delete globalsNoCallbacks[callbackName];\n    });\n    var defaults = extend({\n      url: window.location.toString(),\n      method: 'GET',\n      data: false,\n      async: true,\n      cache: true,\n      user: '',\n      password: '',\n      headers: {},\n      xhrFields: {},\n      statusCode: {},\n      processData: true,\n      dataType: 'text',\n      contentType: 'application/x-www-form-urlencoded',\n      timeout: 0\n    }, globalsNoCallbacks);\n    var proceedRequest;\n    var options = extend({}, defaults, requestOptions);\n\n    if (requestOptions.abortController) {\n      options.abortController = requestOptions.abortController;\n    }\n\n    if (options.abortController && options.abortController.canceled) {\n      reject(new RequestError({\n        options: options,\n        status: 'canceled',\n        message: 'canceled'\n      }));\n      return;\n    } // Function to run XHR callbacks and events\n\n\n    function fireCallback(callbackName) {\n      /*\n      Callbacks:\n      beforeCreate (options),\n      beforeOpen (xhr, options),\n      beforeSend (xhr, options),\n      error (xhr, status, message),\n      complete (xhr, status),\n      success (response, status, xhr),\n      statusCode ()\n      */\n      var globalCallbackValue;\n      var optionCallbackValue;\n\n      for (var _len = arguments.length, data = new Array(_len > 1 ? _len - 1 : 0), _key = 1; _key < _len; _key++) {\n        data[_key - 1] = arguments[_key];\n      }\n\n      if (globals[callbackName]) {\n        globalCallbackValue = globals[callbackName].apply(globals, data);\n      }\n\n      if (options[callbackName]) {\n        optionCallbackValue = options[callbackName].apply(options, data);\n      }\n\n      if (typeof globalCallbackValue !== 'boolean') globalCallbackValue = true;\n      if (typeof optionCallbackValue !== 'boolean') optionCallbackValue = true;\n\n      if (options.abortController && options.abortController.canceled && (callbackName === 'beforeCreate' || callbackName === 'beforeOpen' || callbackName === 'beforeSend')) {\n        return false;\n      }\n\n      return globalCallbackValue && optionCallbackValue;\n    } // Before create callback\n\n\n    proceedRequest = fireCallback('beforeCreate', options);\n\n    if (proceedRequest === false) {\n      reject(new RequestError({\n        options: options,\n        status: 'canceled',\n        message: 'canceled'\n      }));\n      return;\n    } // For jQuery guys\n\n\n    if (options.type) options.method = options.type; // Parameters Prefix\n\n    var paramsPrefix = options.url.indexOf('?') >= 0 ? '&' : '?'; // UC method\n\n    var method = options.method.toUpperCase(); // Data to modify GET URL\n\n    if ((method === 'GET' || method === 'HEAD' || method === 'OPTIONS' || method === 'DELETE') && options.data) {\n      var stringData;\n\n      if (typeof options.data === 'string') {\n        // Should be key=value string\n        if (options.data.indexOf('?') >= 0) stringData = options.data.split('?')[1];else stringData = options.data;\n      } else {\n        // Should be key=value object\n        stringData = serializeObject(options.data);\n      }\n\n      if (stringData.length) {\n        options.url += paramsPrefix + stringData;\n        if (paramsPrefix === '?') paramsPrefix = '&';\n      }\n    } // JSONP\n\n\n    if (options.dataType === 'json' && options.url.indexOf('callback=') >= 0) {\n      var callbackName = \"f7jsonp_\" + (Date.now() + (jsonpRequests += 1));\n      var abortTimeout;\n      var callbackSplit = options.url.split('callback=');\n      var requestUrl = callbackSplit[0] + \"callback=\" + callbackName;\n\n      if (callbackSplit[1].indexOf('&') >= 0) {\n        var addVars = callbackSplit[1].split('&').filter(function (el) {\n          return el.indexOf('=') > 0;\n        }).join('&');\n        if (addVars.length > 0) requestUrl += \"&\" + addVars;\n      } // Create script\n\n\n      var script = document.createElement('script');\n      script.type = 'text/javascript';\n\n      script.onerror = function onerror() {\n        clearTimeout(abortTimeout);\n        fireCallback('error', null, 'scripterror', 'scripterror');\n        reject(new RequestError({\n          options: options,\n          status: 'scripterror',\n          message: 'scripterror'\n        }));\n        fireCallback('complete', null, 'scripterror');\n      };\n\n      script.src = requestUrl; // Handler\n\n      window[callbackName] = function jsonpCallback(data) {\n        clearTimeout(abortTimeout);\n        fireCallback('success', data);\n        script.parentNode.removeChild(script);\n        script = null;\n        delete window[callbackName];\n        resolve(new RequestResponse({\n          options: options,\n          data: data\n        }));\n      };\n\n      document.querySelector('head').appendChild(script);\n\n      if (options.timeout > 0) {\n        abortTimeout = setTimeout(function () {\n          script.parentNode.removeChild(script);\n          script = null;\n          fireCallback('error', null, 'timeout', 'timeout');\n          reject(new RequestError({\n            options: options,\n            status: 'timeout',\n            message: 'timeout'\n          }));\n        }, options.timeout);\n      }\n\n      return;\n    } // Cache for GET/HEAD requests\n\n\n    if (method === 'GET' || method === 'HEAD' || method === 'OPTIONS' || method === 'DELETE') {\n      if (options.cache === false) {\n        options.url += paramsPrefix + \"_nocache\" + Date.now();\n      }\n    } // Create XHR\n\n\n    var xhr = new XMLHttpRequest();\n\n    if (options.abortController) {\n      var aborted = false;\n\n      options.abortController.onAbort = function () {\n        if (aborted) return;\n        aborted = true;\n        xhr.abort();\n        reject(new RequestError({\n          options: options,\n          xhr: xhr,\n          status: 'canceled',\n          message: 'canceled'\n        }));\n      };\n    } // Save Request URL\n\n\n    xhr.requestUrl = options.url;\n    xhr.requestParameters = options; // Before open callback\n\n    proceedRequest = fireCallback('beforeOpen', xhr, options);\n\n    if (proceedRequest === false) {\n      reject(new RequestError({\n        options: options,\n        xhr: xhr,\n        status: 'canceled',\n        message: 'canceled'\n      }));\n      return;\n    } // Open XHR\n\n\n    xhr.open(method, options.url, options.async, options.user, options.password); // Create POST Data\n\n    var postData = null;\n\n    if ((method === 'POST' || method === 'PUT' || method === 'PATCH') && options.data) {\n      if (options.processData) {\n        var postDataInstances = [ArrayBuffer, Blob, Document, FormData]; // Post Data\n\n        if (postDataInstances.indexOf(options.data.constructor) >= 0) {\n          postData = options.data;\n        } else {\n          // POST Headers\n          var boundary = \"---------------------------\" + Date.now().toString(16);\n\n          if (options.contentType === 'multipart/form-data') {\n            xhr.setRequestHeader('Content-Type', \"multipart/form-data; boundary=\" + boundary);\n          } else {\n            xhr.setRequestHeader('Content-Type', options.contentType);\n          }\n\n          postData = '';\n          var data = serializeObject(options.data);\n\n          if (options.contentType === 'multipart/form-data') {\n            data = data.split('&');\n            var newData = [];\n\n            for (var i = 0; i < data.length; i += 1) {\n              newData.push(\"Content-Disposition: form-data; name=\\\"\" + data[i].split('=')[0] + \"\\\"\\r\\n\\r\\n\" + data[i].split('=')[1] + \"\\r\\n\");\n            }\n\n            postData = \"--\" + boundary + \"\\r\\n\" + newData.join(\"--\" + boundary + \"\\r\\n\") + \"--\" + boundary + \"--\\r\\n\";\n          } else if (options.contentType === 'application/json') {\n            postData = JSON.stringify(options.data);\n          } else {\n            postData = data;\n          }\n        }\n      } else {\n        postData = options.data;\n        xhr.setRequestHeader('Content-Type', options.contentType);\n      }\n    }\n\n    if (options.dataType === 'json' && (!options.headers || !options.headers.Accept)) {\n      xhr.setRequestHeader('Accept', 'application/json');\n    } // Additional headers\n\n\n    if (options.headers) {\n      Object.keys(options.headers).forEach(function (headerName) {\n        if (typeof options.headers[headerName] === 'undefined') return;\n        xhr.setRequestHeader(headerName, options.headers[headerName]);\n      });\n    } // Check for crossDomain\n\n\n    if (typeof options.crossDomain === 'undefined') {\n      options.crossDomain = // eslint-disable-next-line\n      /^([\\w-]+:)?\\/\\/([^\\/]+)/.test(options.url) && RegExp.$2 !== window.location.host;\n    }\n\n    if (!options.crossDomain) {\n      xhr.setRequestHeader('X-Requested-With', 'XMLHttpRequest');\n    }\n\n    if (options.xhrFields) {\n      extend(xhr, options.xhrFields);\n    } // Handle XHR\n\n\n    xhr.onload = function onload() {\n      if (xhr.status >= 200 && xhr.status < 300 || xhr.status === 0) {\n        var responseData;\n\n        if (options.dataType === 'json') {\n          var parseError;\n\n          try {\n            responseData = JSON.parse(xhr.responseText);\n          } catch (err) {\n            parseError = true;\n          }\n\n          if (!parseError) {\n            fireCallback('success', responseData, xhr.status, xhr);\n            resolve(new RequestResponse({\n              options: options,\n              data: responseData,\n              status: xhr.status,\n              xhr: xhr\n            }));\n          } else {\n            fireCallback('error', xhr, 'parseerror', 'parseerror');\n            reject(new RequestError({\n              options: options,\n              xhr: xhr,\n              status: 'parseerror',\n              message: 'parseerror'\n            }));\n          }\n        } else {\n          responseData = xhr.responseType === 'text' || xhr.responseType === '' ? xhr.responseText : xhr.response;\n          fireCallback('success', responseData, xhr.status, xhr);\n          resolve(new RequestResponse({\n            options: options,\n            data: responseData,\n            status: xhr.status,\n            xhr: xhr\n          }));\n        }\n      } else {\n        fireCallback('error', xhr, xhr.status, xhr.statusText);\n        reject(new RequestError({\n          options: options,\n          xhr: xhr,\n          status: xhr.status,\n          message: xhr.statusText\n        }));\n      }\n\n      if (options.statusCode) {\n        if (globals.statusCode && globals.statusCode[xhr.status]) globals.statusCode[xhr.status](xhr);\n        if (options.statusCode[xhr.status]) options.statusCode[xhr.status](xhr);\n      }\n\n      fireCallback('complete', xhr, xhr.status);\n    };\n\n    xhr.onerror = function onerror() {\n      fireCallback('error', xhr, xhr.status, xhr.status);\n      reject(new RequestError({\n        options: options,\n        xhr: xhr,\n        status: xhr.status,\n        message: xhr.statusText\n      }));\n      fireCallback('complete', xhr, 'error');\n    }; // Timeout\n\n\n    if (options.timeout > 0) {\n      xhr.timeout = options.timeout;\n\n      xhr.ontimeout = function () {\n        fireCallback('error', xhr, 'timeout', 'timeout');\n        reject(new RequestError({\n          options: options,\n          xhr: xhr,\n          status: 'timeout',\n          message: 'timeout'\n        }));\n        fireCallback('complete', xhr, 'timeout');\n      };\n    } // Ajax start callback\n\n\n    proceedRequest = fireCallback('beforeSend', xhr, options);\n\n    if (proceedRequest === false) {\n      reject(new RequestError({\n        options: options,\n        xhr: xhr,\n        status: 'canceled',\n        message: 'canceled'\n      }));\n      return;\n    } // Send XHR\n\n\n    xhr.send(postData);\n  });\n};\n\nfunction requestShortcut(method) {\n  var _ref = [],\n      url = _ref[0],\n      data = _ref[1],\n      success = _ref[2],\n      error = _ref[3],\n      dataType = _ref[4];\n\n  for (var _len2 = arguments.length, args = new Array(_len2 > 1 ? _len2 - 1 : 0), _key2 = 1; _key2 < _len2; _key2++) {\n    args[_key2 - 1] = arguments[_key2];\n  }\n\n  if (typeof args[1] === 'function') {\n    url = args[0];\n    success = args[1];\n    error = args[2];\n    dataType = args[3];\n  } else {\n    url = args[0];\n    data = args[1];\n    success = args[2];\n    error = args[3];\n    dataType = args[4];\n  }\n\n  [success, error].forEach(function (callback) {\n    if (typeof callback === 'string') {\n      dataType = callback;\n      if (callback === success) success = undefined;else error = undefined;\n    }\n  });\n  dataType = dataType || (method === 'json' || method === 'postJSON' ? 'json' : undefined);\n  var requestOptions = {\n    url: url,\n    method: method === 'post' || method === 'postJSON' ? 'POST' : 'GET',\n    data: data,\n    success: success,\n    error: error,\n    dataType: dataType\n  };\n\n  if (method === 'postJSON') {\n    extend(requestOptions, {\n      contentType: 'application/json',\n      processData: false,\n      crossDomain: true,\n      data: typeof data === 'string' ? data : JSON.stringify(data)\n    });\n  }\n\n  return request(requestOptions);\n}\n\nObject.assign(request, {\n  get: function get() {\n    for (var _len3 = arguments.length, args = new Array(_len3), _key3 = 0; _key3 < _len3; _key3++) {\n      args[_key3] = arguments[_key3];\n    }\n\n    return requestShortcut.apply(void 0, ['get'].concat(args));\n  },\n  post: function post() {\n    for (var _len4 = arguments.length, args = new Array(_len4), _key4 = 0; _key4 < _len4; _key4++) {\n      args[_key4] = arguments[_key4];\n    }\n\n    return requestShortcut.apply(void 0, ['post'].concat(args));\n  },\n  json: function json() {\n    for (var _len5 = arguments.length, args = new Array(_len5), _key5 = 0; _key5 < _len5; _key5++) {\n      args[_key5] = arguments[_key5];\n    }\n\n    return requestShortcut.apply(void 0, ['json'].concat(args));\n  },\n  getJSON: function getJSON() {\n    for (var _len6 = arguments.length, args = new Array(_len6), _key6 = 0; _key6 < _len6; _key6++) {\n      args[_key6] = arguments[_key6];\n    }\n\n    return requestShortcut.apply(void 0, ['json'].concat(args));\n  },\n  postJSON: function postJSON() {\n    for (var _len7 = arguments.length, args = new Array(_len7), _key7 = 0; _key7 < _len7; _key7++) {\n      args[_key7] = arguments[_key7];\n    }\n\n    return requestShortcut.apply(void 0, ['postJSON'].concat(args));\n  }\n});\n\nrequest.abortController = function () {\n  var contoller = {\n    canceled: false,\n    onAbort: null,\n    abort: function abort() {\n      contoller.canceled = true;\n      if (contoller.onAbort) contoller.onAbort();\n    }\n  };\n  return contoller;\n};\n\nrequest.setup = function setup(options) {\n  if (options.type && !options.method) {\n    extend(options, {\n      method: options.type\n    });\n  }\n\n  extend(globals, options);\n};\n\nexport default request;"]},"metadata":{},"sourceType":"module"}